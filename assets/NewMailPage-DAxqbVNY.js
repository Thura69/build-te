import{al as Tt,am as jt,an as Va,ao as vt,Z as Wr,Y as Or,R as Z,d as P,ap as Ka,ad as Hr,j as G,$ as dt,a0 as Dt,S as lr,B as Ua,a1 as Ga,aq as Ya,ar as Xa,K as Ja,w as Za,c as Qa}from"./index-VQSAZRLI.js";import{B as _a}from"./BreadcrumbsDynamic-Cdp7sj4a.js";import{u as eu,I as Rt}from"./InputControllers-DDt3EF8g.js";import{F as ru}from"./FormContainer-DscY9_xB.js";import{h as tu,i as nu}from"./forms-iRkAx9I5.js";import{L as au}from"./InputWrappers-BNYY81Vx.js";import{R as uu}from"./RelatedInputs-qkQvT4Uy.js";import{F as su}from"./TextField-D3R9oRAX.js";import"./useCurrentPages-Itpqw3L7.js";import"./useThemeProps-DmHRh9Bz.js";import"./index-BYV2JyI0.js";import"./NumericFormatCustom-Bp_K41t6.js";import"./react-number-format.es-DoWa0wzu.js";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Nt(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ee(r){var e,t;return Nt(r)===!1?!1:(e=r.constructor,e===void 0?!0:(t=e.prototype,!(Nt(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var iu={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=d.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},ou={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=Q.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},lu={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=B.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},Lr=new WeakMap,$r=new WeakMap,mr=new WeakMap,Yn=new WeakMap,Mt=new WeakMap,It=new WeakMap,kt=new WeakMap,d={ancestors(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=d.levels(r,e);return t?n=n.slice(1):n=n.slice(0,-1),n},common(r,e){for(var t=[],n=0;n<r.length&&n<e.length;n++){var a=r[n],u=e[n];if(a!==u)break;t.push(a)}return t},compare(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++){if(r[n]<e[n])return-1;if(r[n]>e[n])return 1}return 0},endsAfter(r,e){var t=r.length-1,n=r.slice(0,t),a=e.slice(0,t),u=r[t],s=e[t];return d.equals(n,a)&&u>s},endsAt(r,e){var t=r.length,n=r.slice(0,t),a=e.slice(0,t);return d.equals(n,a)},endsBefore(r,e){var t=r.length-1,n=r.slice(0,t),a=e.slice(0,t),u=r[t],s=e[t];return d.equals(n,a)&&u<s},equals(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])},hasPrevious(r){return r[r.length-1]>0},isAfter(r,e){return d.compare(r,e)===1},isAncestor(r,e){return r.length<e.length&&d.compare(r,e)===0},isBefore(r,e){return d.compare(r,e)===-1},isChild(r,e){return r.length===e.length+1&&d.compare(r,e)===0},isCommon(r,e){return r.length<=e.length&&d.compare(r,e)===0},isDescendant(r,e){return r.length>e.length&&d.compare(r,e)===0},isParent(r,e){return r.length+1===e.length&&d.compare(r,e)===0},isPath(r){return Array.isArray(r)&&(r.length===0||typeof r[0]=="number")},isSibling(r,e){if(r.length!==e.length)return!1;var t=r.slice(0,-1),n=e.slice(0,-1),a=r[r.length-1],u=e[e.length-1];return a!==u&&d.equals(t,n)},levels(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=[],a=0;a<=r.length;a++)n.push(r.slice(0,a));return t&&n.reverse(),n},next(r){if(r.length===0)throw new Error("Cannot get the next path of a root path [".concat(r,"], because it has no next index."));var e=r[r.length-1];return r.slice(0,-1).concat(e+1)},operationCanTransformPath(r){switch(r.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(r){if(r.length===0)throw new Error("Cannot get the parent path of the root path [".concat(r,"]."));return r.slice(0,-1)},previous(r){if(r.length===0)throw new Error("Cannot get the previous path of a root path [".concat(r,"], because it has no previous index."));var e=r[r.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(r,"] because it would result in a negative index."));return r.slice(0,-1).concat(e-1)},relative(r,e){if(!d.isAncestor(e,r)&&!d.equals(r,e))throw new Error("Cannot get the relative path of [".concat(r,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return r.slice(e.length)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r)return null;var n=[...r],{affinity:a="forward"}=t;if(r.length===0)return n;switch(e.type){case"insert_node":{var{path:u}=e;(d.equals(u,n)||d.endsBefore(u,n)||d.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(d.equals(s,n)||d.isAncestor(s,n))return null;d.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:l,position:c}=e;d.equals(l,n)||d.endsBefore(l,n)?n[l.length-1]-=1:d.isAncestor(l,n)&&(n[l.length-1]-=1,n[l.length]+=c);break}case"split_node":{var{path:f,position:v}=e;if(d.equals(f,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else d.endsBefore(f,n)?n[f.length-1]+=1:d.isAncestor(f,n)&&r[f.length]>=v&&(n[f.length-1]+=1,n[f.length]-=v);break}case"move_node":{var{path:D,newPath:g}=e;if(d.equals(D,g))return n;if(d.isAncestor(D,n)||d.equals(D,n)){var C=g.slice();return d.endsBefore(D,g)&&D.length<g.length&&(C[D.length-1]-=1),C.concat(n.slice(D.length))}else d.isSibling(D,g)&&(d.isAncestor(g,n)||d.equals(g,n))?d.endsBefore(D,n)?n[D.length-1]-=1:n[D.length-1]+=1:d.endsBefore(g,n)||d.equals(g,n)||d.isAncestor(g,n)?(d.endsBefore(D,n)&&(n[D.length-1]-=1),n[g.length-1]+=1):d.endsBefore(D,n)&&(d.equals(g,n)&&(n[g.length-1]+=1),n[D.length-1]-=1);break}}return n}};function Er(r){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(r)}function fu(r,e){if(Er(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Er(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cu(r){var e=fu(r,"string");return Er(e)==="symbol"?e:String(e)}function Oe(r,e,t){return e=cu(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function gr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var vu=(r,e,t)=>{switch(t.type){case"insert_node":{var{path:n,node:a}=t,u=S.parent(r,n),s=n[n.length-1];if(s>u.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(u.children.splice(s,0,a),e)for(var[l,c]of B.points(e))e[c]=Q.transform(l,t);break}case"insert_text":{var{path:f,offset:v,text:D}=t;if(D.length===0)break;var g=S.leaf(r,f),C=g.text.slice(0,v),p=g.text.slice(v);if(g.text=C+D+p,e)for(var[h,o]of B.points(e))e[o]=Q.transform(h,t);break}case"merge_node":{var{path:A}=t,F=S.get(r,A),w=d.previous(A),x=S.get(r,w),I=S.parent(r,A),k=A[A.length-1];if(z.isText(F)&&z.isText(x))x.text+=F.text;else if(!z.isText(F)&&!z.isText(x))x.children.push(...F.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(pe.stringify(F)," ").concat(pe.stringify(x)));if(I.children.splice(k,1),e)for(var[j,q]of B.points(e))e[q]=Q.transform(j,t);break}case"move_node":{var{path:K,newPath:H}=t;if(d.isAncestor(K,H))throw new Error("Cannot move a path [".concat(K,"] to new path [").concat(H,"] because the destination is inside itself."));var $=S.get(r,K),O=S.parent(r,K),L=K[K.length-1];O.children.splice(L,1);var y=d.transform(K,t),N=S.get(r,d.parent(y)),re=y[y.length-1];if(N.children.splice(re,0,$),e)for(var[V,ae]of B.points(e))e[ae]=Q.transform(V,t);break}case"remove_node":{var{path:_}=t,te=_[_.length-1],oe=S.parent(r,_);if(oe.children.splice(te,1),e)for(var[se,Ce]of B.points(e)){var Be=Q.transform(se,t);if(e!=null&&Be!=null)e[Ce]=Be;else{var X=void 0,m=void 0;for(var[M,T]of S.texts(r))if(d.compare(T,_)===-1)X=[M,T];else{m=[M,T];break}var R=!1;X&&m&&(d.equals(m[1],_)?R=!d.hasPrevious(m[1]):R=d.common(X[1],_).length<d.common(m[1],_).length),X&&!R?(se.path=X[1],se.offset=X[0].text.length):m?(se.path=m[1],se.offset=0):e=null}}break}case"remove_text":{var{path:ee,offset:U,text:ce}=t;if(ce.length===0)break;var ne=S.leaf(r,ee),J=ne.text.slice(0,U),ie=ne.text.slice(U+ce.length);if(ne.text=J+ie,e)for(var[ve,me]of B.points(e))e[me]=Q.transform(ve,t);break}case"set_node":{var{path:le,properties:Ae,newProperties:Fe}=t;if(le.length===0)throw new Error("Cannot set properties on the root node!");var Me=S.get(r,le);for(var fe in Fe){if(fe==="children"||fe==="text")throw new Error('Cannot set the "'.concat(fe,'" property of nodes!'));var je=Fe[fe];je==null?delete Me[fe]:Me[fe]=je}for(var Re in Ae)Fe.hasOwnProperty(Re)||delete Me[Re];break}case"set_selection":{var{newProperties:ue}=t;if(ue==null)e=ue;else{if(e==null){if(!B.isRange(ue))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(pe.stringify(ue)," when there is no current selection."));e=gr({},ue)}for(var de in ue){var Ze=ue[de];if(Ze==null){if(de==="anchor"||de==="focus")throw new Error('Cannot remove the "'.concat(de,'" selection property'));delete e[de]}else e[de]=Ze}}break}case"split_node":{var{path:ye,position:Ie,properties:Qe}=t;if(ye.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ye,"] because the root node cannot be split."));var ke=S.get(r,ye),Ur=S.parent(r,ye),Dr=ye[ye.length-1],ar;if(z.isText(ke)){var La=ke.text.slice(0,Ie),$a=ke.text.slice(Ie);ke.text=La,ar=gr(gr({},Qe),{},{text:$a})}else{var za=ke.children.slice(0,Ie),Wa=ke.children.slice(Ie);ke.children=za,ar=gr(gr({},Qe),{},{children:Wa})}if(Ur.children.splice(Dr+1,0,ar),e)for(var[Ha,qa]of B.points(e))e[qa]=Q.transform(Ha,t);break}}return e},du={transform(r,e){r.children=Tt(r.children);var t=r.selection&&Tt(r.selection);try{t=vu(r,t,e)}finally{r.children=jt(r.children),t?r.selection=Va(t)?jt(t):t:r.selection=null}}},Du={insertNodes(r,e,t){r.insertNodes(e,t)},liftNodes(r,e){r.liftNodes(e)},mergeNodes(r,e){r.mergeNodes(e)},moveNodes(r,e){r.moveNodes(e)},removeNodes(r,e){r.removeNodes(e)},setNodes(r,e,t){r.setNodes(e,t)},splitNodes(r,e){r.splitNodes(e)},unsetNodes(r,e,t){r.unsetNodes(e,t)},unwrapNodes(r,e){r.unwrapNodes(e)},wrapNodes(r,e,t){r.wrapNodes(e,t)}},gu={collapse(r,e){r.collapse(e)},deselect(r){r.deselect()},move(r,e){r.move(e)},select(r,e){r.select(e)},setPoint(r,e,t){r.setPoint(e,t)},setSelection(r,e){r.setSelection(e)}},Xn=(r,e)=>{for(var t in r){var n=r[t],a=e[t];if(Ee(n)&&Ee(a)){if(!Xn(n,a))return!1}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(n!==a)return!1}for(var s in e)if(r[s]===void 0&&e[s]!==void 0)return!1;return!0};function hu(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function He(r,e){if(r==null)return{};var t=hu(r,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var mu=["anchor","focus"];function $t(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Cu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$t(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$t(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var B={edges(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,{anchor:n,focus:a}=r;return B.isBackward(r)===t?[n,a]:[a,n]},end(r){var[,e]=B.edges(r);return e},equals(r,e){return Q.equals(r.anchor,e.anchor)&&Q.equals(r.focus,e.focus)},includes(r,e){if(B.isRange(e)){if(B.includes(r,e.anchor)||B.includes(r,e.focus))return!0;var[t,n]=B.edges(r),[a,u]=B.edges(e);return Q.isBefore(t,a)&&Q.isAfter(n,u)}var[s,l]=B.edges(r),c=!1,f=!1;return Q.isPoint(e)?(c=Q.compare(e,s)>=0,f=Q.compare(e,l)<=0):(c=d.compare(e,s.path)>=0,f=d.compare(e,l.path)<=0),c&&f},intersection(r,e){var t=He(r,mu),[n,a]=B.edges(r),[u,s]=B.edges(e),l=Q.isBefore(n,u)?u:n,c=Q.isBefore(a,s)?a:s;return Q.isBefore(c,l)?null:Cu({anchor:l,focus:c},t)},isBackward(r){var{anchor:e,focus:t}=r;return Q.isAfter(e,t)},isCollapsed(r){var{anchor:e,focus:t}=r;return Q.equals(e,t)},isExpanded(r){return!B.isCollapsed(r)},isForward(r){return!B.isBackward(r)},isRange(r){return Ee(r)&&Q.isPoint(r.anchor)&&Q.isPoint(r.focus)},*points(r){yield[r.anchor,"anchor"],yield[r.focus,"focus"]},start(r){var[e]=B.edges(r);return e},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return vt(r,n=>{if(n===null)return null;var{affinity:a="inward"}=t,u,s;if(a==="inward"){var l=B.isCollapsed(n);B.isForward(n)?(u="forward",s=l?u:"backward"):(u="backward",s=l?u:"forward")}else a==="outward"?B.isForward(n)?(u="backward",s="forward"):(u="forward",s="backward"):(u=a,s=a);var c=Q.transform(n.anchor,e,{affinity:u}),f=Q.transform(n.focus,e,{affinity:s});if(!c||!f)return null;n.anchor=c,n.focus=f})}},zt=r=>Ee(r)&&S.isNodeList(r.children)&&!i.isEditor(r),W={isAncestor(r){return Ee(r)&&S.isNodeList(r.children)},isElement:zt,isElementList(r){return Array.isArray(r)&&r.every(e=>W.isElement(e))},isElementProps(r){return r.children!==void 0},isElementType:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return zt(e)&&e[n]===t},matches(r,e){for(var t in e)if(t!=="children"&&r[t]!==e[t])return!1;return!0}},pu=["children"],Bu=["text"],Wt=new WeakMap,S={ancestor(r,e){var t=S.get(r,e);if(z.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(pe.stringify(t)));return t},ancestors(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of d.ancestors(e,t)){var a=S.ancestor(r,n),u=[a,n];yield u}}()},child(r,e){if(z.isText(r))throw new Error("Cannot get the child of a text node: ".concat(pe.stringify(r)));var t=r.children[e];if(t==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(pe.stringify(r)));return t},children(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,a=S.ancestor(r,e),{children:u}=a,s=n?u.length-1:0;n?s>=0:s<u.length;){var l=S.child(a,s),c=e.concat(s);yield[l,c],s=n?s-1:s+1}}()},common(r,e,t){var n=d.common(e,t),a=S.get(r,n);return[a,n]},descendant(r,e){var t=S.get(r,e);if(i.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(pe.stringify(t)));return t},descendants(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of S.nodes(r,e))n.length!==0&&(yield[t,n])}()},elements(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of S.nodes(r,e))W.isElement(t)&&(yield[t,n])}()},extractProps(r){if(W.isAncestor(r)){var e=He(r,pu);return e}else{var e=He(r,Bu);return e}},first(r,e){for(var t=e.slice(),n=S.get(r,t);n&&!(z.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(r,e){if(z.isText(r))throw new Error("Cannot get a fragment starting from a root text node: ".concat(pe.stringify(r)));var t=vt({children:r.children},n=>{var[a,u]=B.edges(e),s=S.nodes(n,{reverse:!0,pass:g=>{var[,C]=g;return!B.includes(e,C)}});for(var[,l]of s){if(!B.includes(e,l)){var c=S.parent(n,l),f=l[l.length-1];c.children.splice(f,1)}if(d.equals(l,u.path)){var v=S.leaf(n,l);v.text=v.text.slice(0,u.offset)}if(d.equals(l,a.path)){var D=S.leaf(n,l);D.text=D.text.slice(a.offset)}}i.isEditor(n)&&(n.selection=null)});return t.children},get(r,e){for(var t=r,n=0;n<e.length;n++){var a=e[n];if(z.isText(t)||!t.children[a])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(pe.stringify(r)));t=t.children[a]}return t},has(r,e){for(var t=r,n=0;n<e.length;n++){var a=e[n];if(z.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(r){return z.isText(r)||W.isElement(r)||i.isEditor(r)},isNodeList(r){if(!Array.isArray(r))return!1;var e=Wt.get(r);if(e!==void 0)return e;var t=r.every(n=>S.isNode(n));return Wt.set(r,t),t},last(r,e){for(var t=e.slice(),n=S.get(r,t);n&&!(z.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],t.push(a)}return[n,t]},leaf(r,e){var t=S.get(r,e);if(!z.isText(t))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(pe.stringify(t)));return t},levels(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of d.levels(e,t)){var a=S.get(r,n);yield[a,n]}}()},matches(r,e){return W.isElement(r)&&W.isElementProps(e)&&W.matches(r,e)||z.isText(r)&&z.isTextProps(e)&&z.matches(r,e)},nodes(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=e,{from:a=[],to:u}=e,s=new Set,l=[],c=r;!(u&&(n?d.isBefore(l,u):d.isAfter(l,u)));){if(s.has(c)||(yield[c,l]),!s.has(c)&&!z.isText(c)&&c.children.length!==0&&(t==null||t([c,l])===!1)){s.add(c);var f=n?c.children.length-1:0;d.isAncestor(l,a)&&(f=a[l.length]),l=l.concat(f),c=S.get(r,l);continue}if(l.length===0)break;if(!n){var v=d.next(l);if(S.has(r,v)){l=v,c=S.get(r,l);continue}}if(n&&l[l.length-1]!==0){var D=d.previous(l);l=D,c=S.get(r,l);continue}l=d.parent(l),c=S.get(r,l),s.add(c)}}()},parent(r,e){var t=d.parent(e),n=S.get(r,t);if(z.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(r){return z.isText(r)?r.text:r.children.map(S.string).join("")},texts(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of S.nodes(r,e))z.isText(t)&&(yield[t,n])}()}};function Ht(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function De(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ht(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ge={isNodeOperation(r){return Ge.isOperation(r)&&r.type.endsWith("_node")},isOperation(r){if(!Ee(r))return!1;switch(r.type){case"insert_node":return d.isPath(r.path)&&S.isNode(r.node);case"insert_text":return typeof r.offset=="number"&&typeof r.text=="string"&&d.isPath(r.path);case"merge_node":return typeof r.position=="number"&&d.isPath(r.path)&&Ee(r.properties);case"move_node":return d.isPath(r.path)&&d.isPath(r.newPath);case"remove_node":return d.isPath(r.path)&&S.isNode(r.node);case"remove_text":return typeof r.offset=="number"&&typeof r.text=="string"&&d.isPath(r.path);case"set_node":return d.isPath(r.path)&&Ee(r.properties)&&Ee(r.newProperties);case"set_selection":return r.properties===null&&B.isRange(r.newProperties)||r.newProperties===null&&B.isRange(r.properties)||Ee(r.properties)&&Ee(r.newProperties);case"split_node":return d.isPath(r.path)&&typeof r.position=="number"&&Ee(r.properties);default:return!1}},isOperationList(r){return Array.isArray(r)&&r.every(e=>Ge.isOperation(e))},isSelectionOperation(r){return Ge.isOperation(r)&&r.type.endsWith("_selection")},isTextOperation(r){return Ge.isOperation(r)&&r.type.endsWith("_text")},inverse(r){switch(r.type){case"insert_node":return De(De({},r),{},{type:"remove_node"});case"insert_text":return De(De({},r),{},{type:"remove_text"});case"merge_node":return De(De({},r),{},{type:"split_node",path:d.previous(r.path)});case"move_node":{var{newPath:e,path:t}=r;if(d.equals(e,t))return r;if(d.isSibling(t,e))return De(De({},r),{},{path:e,newPath:t});var n=d.transform(t,r),a=d.transform(d.next(t),r);return De(De({},r),{},{path:n,newPath:a})}case"remove_node":return De(De({},r),{},{type:"insert_node"});case"remove_text":return De(De({},r),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:s}=r;return De(De({},r),{},{properties:s,newProperties:u})}case"set_selection":{var{properties:l,newProperties:c}=r;return l==null?De(De({},r),{},{properties:c,newProperties:null}):c==null?De(De({},r),{},{properties:null,newProperties:l}):De(De({},r),{},{properties:c,newProperties:l})}case"split_node":return De(De({},r),{},{type:"merge_node",path:d.next(r.path)})}}},qt=new WeakMap,Eu=r=>{var e=qt.get(r);if(e!==void 0)return e;if(!Ee(r))return!1;var t=typeof r.addMark=="function"&&typeof r.apply=="function"&&typeof r.deleteFragment=="function"&&typeof r.insertBreak=="function"&&typeof r.insertSoftBreak=="function"&&typeof r.insertFragment=="function"&&typeof r.insertNode=="function"&&typeof r.insertText=="function"&&typeof r.isElementReadOnly=="function"&&typeof r.isInline=="function"&&typeof r.isSelectable=="function"&&typeof r.isVoid=="function"&&typeof r.normalizeNode=="function"&&typeof r.onChange=="function"&&typeof r.removeMark=="function"&&typeof r.getDirtyPaths=="function"&&(r.marks===null||Ee(r.marks))&&(r.selection===null||B.isRange(r.selection))&&S.isNodeList(r.children)&&Ge.isOperationList(r.operations);return qt.set(r,t),t},i={above(r,e){return r.above(e)},addMark(r,e,t){r.addMark(e,t)},after(r,e,t){return r.after(e,t)},before(r,e,t){return r.before(e,t)},deleteBackward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteBackward(t)},deleteForward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteForward(t)},deleteFragment(r,e){r.deleteFragment(e)},edges(r,e){return r.edges(e)},elementReadOnly(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.elementReadOnly(e)},end(r,e){return r.end(e)},first(r,e){return r.first(e)},fragment(r,e){return r.fragment(e)},hasBlocks(r,e){return r.hasBlocks(e)},hasInlines(r,e){return r.hasInlines(e)},hasPath(r,e){return r.hasPath(e)},hasTexts(r,e){return r.hasTexts(e)},insertBreak(r){r.insertBreak()},insertFragment(r,e,t){r.insertFragment(e,t)},insertNode(r,e){r.insertNode(e)},insertSoftBreak(r){r.insertSoftBreak()},insertText(r,e){r.insertText(e)},isBlock(r,e){return r.isBlock(e)},isEdge(r,e,t){return r.isEdge(e,t)},isEditor(r){return Eu(r)},isElementReadOnly(r,e){return r.isElementReadOnly(e)},isEmpty(r,e){return r.isEmpty(e)},isEnd(r,e,t){return r.isEnd(e,t)},isInline(r,e){return r.isInline(e)},isNormalizing(r){return r.isNormalizing()},isSelectable(r,e){return r.isSelectable(e)},isStart(r,e,t){return r.isStart(e,t)},isVoid(r,e){return r.isVoid(e)},last(r,e){return r.last(e)},leaf(r,e,t){return r.leaf(e,t)},levels(r,e){return r.levels(e)},marks(r){return r.getMarks()},next(r,e){return r.next(e)},node(r,e,t){return r.node(e,t)},nodes(r,e){return r.nodes(e)},normalize(r,e){r.normalize(e)},parent(r,e,t){return r.parent(e,t)},path(r,e,t){return r.path(e,t)},pathRef(r,e,t){return r.pathRef(e,t)},pathRefs(r){return r.pathRefs()},point(r,e,t){return r.point(e,t)},pointRef(r,e,t){return r.pointRef(e,t)},pointRefs(r){return r.pointRefs()},positions(r,e){return r.positions(e)},previous(r,e){return r.previous(e)},range(r,e,t){return r.range(e,t)},rangeRef(r,e,t){return r.rangeRef(e,t)},rangeRefs(r){return r.rangeRefs()},removeMark(r,e){r.removeMark(e)},setNormalizing(r,e){r.setNormalizing(e)},start(r,e){return r.start(e)},string(r,e,t){return r.string(e,t)},unhangRange(r,e,t){return r.unhangRange(e,t)},void(r,e){return r.void(e)},withoutNormalizing(r,e){r.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(r,e,t)=>r.shouldMergeNodesRemovePrevNode(e,t)},Au={isSpan(r){return Array.isArray(r)&&r.length===2&&r.every(d.isPath)}};function Vt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Kt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Q={compare(r,e){var t=d.compare(r.path,e.path);return t===0?r.offset<e.offset?-1:r.offset>e.offset?1:0:t},isAfter(r,e){return Q.compare(r,e)===1},isBefore(r,e){return Q.compare(r,e)===-1},equals(r,e){return r.offset===e.offset&&d.equals(r.path,e.path)},isPoint(r){return Ee(r)&&typeof r.offset=="number"&&d.isPath(r.path)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return vt(r,n=>{if(n===null)return null;var{affinity:a="forward"}=t,{path:u,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=d.transform(u,e,t);break}case"insert_text":{d.equals(e.path,u)&&(e.offset<s||e.offset===s&&a==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{d.equals(e.path,u)&&(n.offset+=e.position),n.path=d.transform(u,e,t);break}case"remove_text":{d.equals(e.path,u)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(d.equals(e.path,u)||d.isAncestor(e.path,u))return null;n.path=d.transform(u,e,t);break}case"split_node":{if(d.equals(e.path,u)){if(e.position===s&&a==null)return null;(e.position<s||e.position===s&&a==="forward")&&(n.offset-=e.position,n.path=d.transform(u,e,Kt(Kt({},t),{},{affinity:"forward"})))}else n.path=d.transform(u,e,t);break}}})}},Ut=void 0,pe={setScrubber(r){Ut=r},stringify(r){return JSON.stringify(r,Ut)}},Fu=["text"],bu=["anchor","focus"];function Gt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ze(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var z={equals(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function a(u){var s=He(u,Fu);return s}return Xn(n?a(r):r,n?a(e):e)},isText(r){return Ee(r)&&typeof r.text=="string"},isTextList(r){return Array.isArray(r)&&r.every(e=>z.isText(e))},isTextProps(r){return r.text!==void 0},matches(r,e){for(var t in e)if(t!=="text"&&(!r.hasOwnProperty(t)||r[t]!==e[t]))return!1;return!0},decorations(r,e){var t=[ze({},r)];for(var n of e){var a=He(n,bu),[u,s]=B.edges(n),l=[],c=0,f=u.offset,v=s.offset;for(var D of t){var{length:g}=D.text,C=c;if(c+=g,f<=C&&c<=v){Object.assign(D,a),l.push(D);continue}if(f!==v&&(f===c||v===C)||f>c||v<C||v===C&&C!==0){l.push(D);continue}var p=D,h=void 0,o=void 0;if(v<c){var A=v-C;o=ze(ze({},p),{},{text:p.text.slice(A)}),p=ze(ze({},p),{},{text:p.text.slice(0,A)})}if(f>C){var F=f-C;h=ze(ze({},p),{},{text:p.text.slice(0,F)}),p=ze(ze({},p),{},{text:p.text.slice(F)})}Object.assign(p,a),h&&l.push(h),l.push(p),o&&l.push(o)}t=l}return t}},gt=r=>r.selection?r.selection:r.children.length>0?i.end(r,[]):[0],dr=(r,e)=>{var[t]=i.node(r,e);return n=>n===t},ht=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,a=t?Pu(e):e,u=Y.None,s=Y.None,l=0,c=null,f=null;for(var v of a){var D=v.codePointAt(0);if(!D)break;var g=Hu(v,D);if([u,s]=n?[s,g]:[g,u],sr(u,Y.ZWJ)&&sr(s,Y.ExtPict)&&(n?c=Yt(e.substring(0,l)):c=Yt(e.substring(0,e.length-l)),!c)||sr(u,Y.RI)&&sr(s,Y.RI)&&(f!==null?f=!f:n?f=!0:f=Gu(e.substring(0,e.length-l)),!f)||u!==Y.None&&s!==Y.None&&Vu(u,s))break;l+=v.length}return l||1},wu=/\s/,Ou=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,yu=/['\u2018\u2019]/,xu=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;e.length>0;){var u=ht(e,t),[s,l]=mt(e,u,t);if(Su(s,l,t))a=!0,n+=u;else if(!a)n+=u;else break;e=l}return n},mt=(r,e,t)=>{if(t){var n=r.length-e;return[r.slice(n,r.length),r.slice(0,n)]}return[r.slice(0,e),r.slice(e)]},Su=function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(wu.test(e))return!1;if(yu.test(e)){var a=ht(t,n),[u,s]=mt(t,a,n);if(r(u,s,n))return!0}return!Ou.test(e)},Pu=function*(e){for(var t=e.length-1,n=0;n<e.length;n++){var a=e.charAt(t-n);if(ju(a.charCodeAt(0))){var u=e.charAt(t-n-1);if(Tu(u.charCodeAt(0))){yield u+a,n++;continue}}yield a}},Tu=r=>r>=55296&&r<=56319,ju=r=>r>=56320&&r<=57343,Y;(function(r){r[r.None=0]="None",r[r.Extend=1]="Extend",r[r.ZWJ=2]="ZWJ",r[r.RI=4]="RI",r[r.Prepend=8]="Prepend",r[r.SpacingMark=16]="SpacingMark",r[r.L=32]="L",r[r.V=64]="V",r[r.T=128]="T",r[r.LV=256]="LV",r[r.LVT=512]="LVT",r[r.ExtPict=1024]="ExtPict",r[r.Any=2048]="Any"})(Y||(Y={}));var Ru=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Nu=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Mu=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Iu=/^[\u1100-\u115F\uA960-\uA97C]$/,ku=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Lu=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,$u=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,zu=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Wu=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Hu=(r,e)=>{var t=Y.Any;return r.search(Ru)!==-1&&(t|=Y.Extend),e===8205&&(t|=Y.ZWJ),e>=127462&&e<=127487&&(t|=Y.RI),r.search(Nu)!==-1&&(t|=Y.Prepend),r.search(Mu)!==-1&&(t|=Y.SpacingMark),r.search(Iu)!==-1&&(t|=Y.L),r.search(ku)!==-1&&(t|=Y.V),r.search(Lu)!==-1&&(t|=Y.T),r.search($u)!==-1&&(t|=Y.LV),r.search(zu)!==-1&&(t|=Y.LVT),r.search(Wu)!==-1&&(t|=Y.ExtPict),t};function sr(r,e){return(r&e)!==0}var qu=[[Y.L,Y.L|Y.V|Y.LV|Y.LVT],[Y.LV|Y.V,Y.V|Y.T],[Y.LVT|Y.T,Y.T],[Y.Any,Y.Extend|Y.ZWJ],[Y.Any,Y.SpacingMark],[Y.Prepend,Y.Any],[Y.ZWJ,Y.ExtPict],[Y.RI,Y.RI]];function Vu(r,e){return qu.findIndex(t=>sr(r,t[0])&&sr(e,t[1]))===-1}var Ku=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Yt=r=>r.search(Ku)!==-1,Uu=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Gu=r=>{var e=r.match(Uu);if(e===null)return!1;var t=e[0].length/2;return t%2===1},Yu={delete(r,e){r.delete(e)},insertFragment(r,e,t){r.insertFragment(e,t)},insertText(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(r,()=>{var{voids:n=!1}=t,{at:a=gt(r)}=t;if(d.isPath(a)&&(a=i.range(r,a)),B.isRange(a))if(B.isCollapsed(a))a=a.anchor;else{var u=B.end(a);if(!n&&i.void(r,{at:u}))return;var s=B.start(a),l=i.pointRef(r,s),c=i.pointRef(r,u);b.delete(r,{at:a,voids:n});var f=l.unref(),v=c.unref();a=f||v,b.setSelection(r,{anchor:a,focus:a})}if(!(!n&&i.void(r,{at:a})||i.elementReadOnly(r,{at:a}))){var{path:D,offset:g}=a;e.length>0&&r.apply({type:"insert_text",path:D,offset:g,text:e})}})}};function Xt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function yr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var b=yr(yr(yr(yr({},du),Du),gu),Yu),Nr=new WeakMap,Xu=r=>Nr.get(r)||!1,Ju=(r,e,t)=>{var n=Nr.get(r)||!1;Nr.set(r,!0);try{e(),t()}finally{Nr.set(r,n)}};function Jn(r,e,t){var n=Lr.get(r)||[],a=$r.get(r)||new Set,u,s,l=D=>{if(D){var g=D.join(",");s.has(g)||(s.add(g),u.push(D))}};if(t){u=[],s=new Set;for(var c of n){var f=t(c);l(f)}}else u=n,s=a;for(var v of e)l(v);Lr.set(r,u),$r.set(r,s)}var Zu=(r,e)=>{for(var t of i.pathRefs(r))iu.transform(t,e);for(var n of i.pointRefs(r))ou.transform(n,e);for(var a of i.rangeRefs(r))lu.transform(a,e);if(!Xu(r)){var u=d.operationCanTransformPath(e)?s=>d.transform(s,e):void 0;Jn(r,r.getDirtyPaths(e),u)}b.transform(r,e),r.operations.push(e),i.normalize(r,{operation:e}),e.type==="set_selection"&&(r.marks=null),mr.get(r)||(mr.set(r,!0),Promise.resolve().then(()=>{mr.set(r,!1),r.onChange({operation:e}),r.operations=[]}))},Qu=(r,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=e;return d.levels(t)}case"insert_node":{var{node:n,path:a}=e,u=d.levels(a),s=z.isText(n)?[]:Array.from(S.nodes(n),H=>{var[,$]=H;return a.concat($)});return[...u,...s]}case"merge_node":{var{path:l}=e,c=d.ancestors(l),f=d.previous(l);return[...c,f]}case"move_node":{var{path:v,newPath:D}=e;if(d.equals(v,D))return[];var g=[],C=[];for(var p of d.ancestors(v)){var h=d.transform(p,e);g.push(h)}for(var o of d.ancestors(D)){var A=d.transform(o,e);C.push(A)}var F=C[C.length-1],w=D[D.length-1],x=F.concat(w);return[...g,...C,x]}case"remove_node":{var{path:I}=e,k=d.ancestors(I);return[...k]}case"split_node":{var{path:j}=e,q=d.levels(j),K=d.next(j);return[...q,K]}default:return[]}},_u=r=>{var{selection:e}=r;return e?S.fragment(r,e):[]},es=(r,e)=>{var[t,n]=e;if(!z.isText(t)){if(W.isElement(t)&&t.children.length===0){var a={text:""};b.insertNodes(r,a,{at:n.concat(0),voids:!0});return}for(var u=i.isEditor(t)?!1:W.isElement(t)&&(r.isInline(t)||t.children.length===0||z.isText(t.children[0])||r.isInline(t.children[0])),s=0,l=0;l<t.children.length;l++,s++){var c=S.get(r,n);if(!z.isText(c)){var f=c.children[s],v=c.children[s-1],D=l===t.children.length-1,g=z.isText(f)||W.isElement(f)&&r.isInline(f);if(g!==u)b.removeNodes(r,{at:n.concat(s),voids:!0}),s--;else if(W.isElement(f)){if(r.isInline(f)){if(v==null||!z.isText(v)){var C={text:""};b.insertNodes(r,C,{at:n.concat(s),voids:!0}),s++}else if(D){var p={text:""};b.insertNodes(r,p,{at:n.concat(s+1),voids:!0}),s++}}}else{if(!z.isText(f)&&!("children"in f)){var h=f;h.children=[]}v!=null&&z.isText(v)&&(z.equals(f,v,{loose:!0})?(b.mergeNodes(r,{at:n.concat(s),voids:!0}),s--):v.text===""?(b.removeNodes(r,{at:n.concat(s-1),voids:!0}),s--):f.text===""&&(b.removeNodes(r,{at:n.concat(s),voids:!0}),s--))}}}}},rs=(r,e)=>{var{iteration:t,initialDirtyPathsLength:n}=e,a=n*42;if(t>a)throw new Error("Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},ts=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:a="lowest",at:u=e.selection,match:s}=t;if(u){var l=i.path(e,u),c=a==="lowest";for(var[f,v]of i.levels(e,{at:l,voids:n,match:s,reverse:c}))if(!z.isText(f)){if(B.isRange(u)){if(d.isAncestor(v,u.anchor.path)&&d.isAncestor(v,u.focus.path))return[f,v]}else if(!d.equals(l,v))return[f,v]}}};function Jt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Zt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Jt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ns=(r,e,t)=>{var{selection:n}=r;if(n){var a=(D,g)=>{if(!z.isText(D))return!1;var[C,p]=i.parent(r,g);return!r.isVoid(C)||r.markableVoid(C)},u=B.isExpanded(n),s=!1;if(!u){var[l,c]=i.node(r,n);if(l&&a(l,c)){var[f]=i.parent(r,c);s=f&&r.markableVoid(f)}}if(u||s)b.setNodes(r,{[e]:t},{match:a,split:!0,voids:!0});else{var v=Zt(Zt({},i.marks(r)||{}),{},{[e]:t});r.marks=v,mr.get(r)||r.onChange()}}};function Qt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _t(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qt(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Qt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var as=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.point(e,t,{edge:"end"}),u=i.end(e,[]),s={anchor:a,focus:u},{distance:l=1}=n,c=0,f;for(var v of i.positions(e,_t(_t({},n),{},{at:s}))){if(c>l)break;c!==0&&(f=v),c++}return f};function en(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function rn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?en(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var us=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.start(e,[]),u=i.point(e,t,{edge:"start"}),s={anchor:a,focus:u},{distance:l=1}=n,c=0,f;for(var v of i.positions(e,rn(rn({},n),{},{at:s,reverse:!0}))){if(c>l)break;c!==0&&(f=v),c++}return f},ss=(r,e)=>{var{selection:t}=r;t&&B.isCollapsed(t)&&b.delete(r,{unit:e,reverse:!0})},is=(r,e)=>{var{selection:t}=r;t&&B.isCollapsed(t)&&b.delete(r,{unit:e})},os=function(e){var{direction:t="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&B.isExpanded(n)&&b.delete(e,{reverse:t==="backward"})},ls=(r,e)=>[i.start(r,e),i.end(r,e)];function tn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function nn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var fs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.above(e,nn(nn({},t),{},{match:n=>W.isElement(n)&&i.isElementReadOnly(e,n)}))},cs=(r,e)=>i.point(r,e,{edge:"end"}),vs=(r,e)=>{var t=i.path(r,e,{edge:"start"});return i.node(r,t)},ds=(r,e)=>{var t=i.range(r,e);return S.fragment(r,t)};function an(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function un(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?an(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ds=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.above(e,un(un({},t),{},{match:n=>W.isElement(n)&&i.isVoid(e,n)}))},gs=(r,e)=>e.children.some(t=>W.isElement(t)&&i.isBlock(r,t)),hs=(r,e)=>e.children.some(t=>z.isText(t)||i.isInline(r,t)),ms=(r,e)=>S.has(r,e),Cs=(r,e)=>e.children.every(t=>z.isText(t)),ps=r=>{b.splitNodes(r,{always:!0})},Bs=(r,e,t)=>{b.insertNodes(r,e,t)},Es=r=>{b.splitNodes(r,{always:!0})};function sn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function As(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Fs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a,marks:u}=e;if(a){if(u){var s=As({text:t},u);b.insertNodes(e,s,{at:n.at,voids:n.voids})}else b.insertText(e,t,n);e.marks=null}},bs=(r,e)=>!r.isInline(e),ws=(r,e,t)=>i.isStart(r,e,t)||i.isEnd(r,e,t),Os=(r,e)=>{var{children:t}=e,[n]=t;return t.length===0||t.length===1&&z.isText(n)&&n.text===""&&!r.isVoid(e)},ys=(r,e,t)=>{var n=i.end(r,t);return Q.equals(e,n)},xs=r=>{var e=Yn.get(r);return e===void 0?!0:e},Ss=(r,e,t)=>{if(e.offset!==0)return!1;var n=i.start(r,t);return Q.equals(e,n)},Ps=(r,e)=>{var t=i.path(r,e,{edge:"end"});return i.node(r,t)},Ts=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.path(e,t,n),u=S.leaf(e,a);return[u,a]};function js(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,reverse:n=!1,voids:a=!1}=e,{match:u}=e;if(u==null&&(u=()=>!0),!!t){var s=[],l=i.path(r,t);for(var[c,f]of S.levels(r,l))if(u(c,f)&&(s.push([c,f]),!a&&W.isElement(c)&&i.isVoid(r,c)))break;n&&s.reverse(),yield*s}}()}var Rs=["text"],Ns=["text"],Ms=function(e){var{marks:t,selection:n}=e;if(!n)return null;var{anchor:a,focus:u}=n;if(t)return t;if(B.isExpanded(n)){var s=i.isEnd(e,a,a.path);if(s){var l=i.after(e,a);l&&(a=l)}var[c]=i.nodes(e,{match:z.isText,at:{anchor:a,focus:u}});if(c){var[f]=c,v=He(f,Rs);return v}else return{}}var{path:D}=a,[g]=i.leaf(e,D);if(a.offset===0){var C=i.previous(e,{at:D,match:z.isText}),p=i.above(e,{match:x=>W.isElement(x)&&i.isVoid(e,x)&&e.markableVoid(x)});if(!p){var h=i.above(e,{match:x=>W.isElement(x)&&i.isBlock(e,x)});if(C&&h){var[o,A]=C,[,F]=h;d.isAncestor(F,A)&&(g=o)}}}var w=He(g,Ns);return w},Is=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=e.selection}=t;if(s){var l=i.after(e,s,{voids:a});if(l){var[,c]=i.last(e,[]),f=[l.path,c];if(d.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(u==null)if(d.isPath(s)){var[v]=i.parent(e,s);u=g=>v.children.includes(g)}else u=()=>!0;var[D]=i.nodes(e,{at:f,match:u,mode:n,voids:a});return D}}},ks=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.path(e,t,n),u=S.get(e,a);return[u,a]};function Ls(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,mode:n="all",universal:a=!1,reverse:u=!1,voids:s=!1,ignoreNonSelectable:l=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!t){var f,v;if(Au.isSpan(t))f=t[0],v=t[1];else{var D=i.path(r,t,{edge:"start"}),g=i.path(r,t,{edge:"end"});f=u?g:D,v=u?D:g}var C=S.nodes(r,{reverse:u,from:f,to:v,pass:x=>{var[I]=x;return W.isElement(I)?!!(!s&&(i.isVoid(r,I)||i.isElementReadOnly(r,I))||l&&!i.isSelectable(r,I)):!1}}),p=[],h;for(var[o,A]of C)if(!(l&&W.isElement(o)&&!i.isSelectable(r,o))){var F=h&&d.compare(A,h[1])===0;if(!(n==="highest"&&F)){if(!c(o,A)){if(a&&!F&&z.isText(o))return;continue}if(n==="lowest"&&F){h=[o,A];continue}var w=n==="lowest"?h:[o,A];w&&(a?p.push(w):yield w),h=[o,A]}}n==="lowest"&&h&&(a?p.push(h):yield h),a&&(yield*p)}}()}var $s=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:a}=t,u=v=>Lr.get(v)||[],s=v=>$r.get(v)||new Set,l=v=>{var D=u(v).pop(),g=D.join(",");return s(v).delete(g),D};if(i.isNormalizing(e)){if(n){var c=Array.from(S.nodes(e),v=>{var[,D]=v;return D}),f=new Set(c.map(v=>v.join(",")));Lr.set(e,c),$r.set(e,f)}u(e).length!==0&&i.withoutNormalizing(e,()=>{for(var v of u(e))if(S.has(e,v)){var D=i.node(e,v),[g,C]=D;W.isElement(g)&&g.children.length===0&&e.normalizeNode(D,{operation:a})}for(var p=u(e),h=p.length,o=0;p.length!==0;){if(!e.shouldNormalize({dirtyPaths:p,iteration:o,initialDirtyPathsLength:h,operation:a}))return;var A=l(e);if(S.has(e,A)){var F=i.node(e,A);e.normalizeNode(F,{operation:a})}o++,p=u(e)}})}},zs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.path(e,t,n),u=d.parent(a),s=i.node(e,u);return s},Ws=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:l}=u,c=i.pathRefs(e);return c.delete(u),u.current=null,l}},s=i.pathRefs(e);return s.add(u),u},Hs=r=>{var e=Mt.get(r);return e||(e=new Set,Mt.set(r,e)),e},qs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:a,edge:u}=n;if(d.isPath(t)){if(u==="start"){var[,s]=S.first(e,t);t=s}else if(u==="end"){var[,l]=S.last(e,t);t=l}}return B.isRange(t)&&(u==="start"?t=B.start(t):u==="end"?t=B.end(t):t=d.common(t.anchor.path,t.focus.path)),Q.isPoint(t)&&(t=t.path),a!=null&&(t=t.slice(0,a)),t},Vs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:l}=u,c=i.pointRefs(e);return c.delete(u),u.current=null,l}},s=i.pointRefs(e);return s.add(u),u},Ks=r=>{var e=It.get(r);return e||(e=new Set,It.set(r,e)),e},Us=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:a="start"}=n;if(d.isPath(t)){var u;if(a==="end"){var[,s]=S.last(e,t);u=s}else{var[,l]=S.first(e,t);u=l}var c=S.get(e,u);if(!z.isText(c))throw new Error("Cannot get the ".concat(a," point in the node at path [").concat(t,"] because it has no ").concat(a," text node."));return{path:u,offset:a==="end"?c.text.length:0}}if(B.isRange(t)){var[f,v]=B.edges(t);return a==="start"?f:v}return t};function Gs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,unit:n="offset",reverse:a=!1,voids:u=!1,ignoreNonSelectable:s=!1}=e;if(!t)return;var l=i.range(r,t),[c,f]=B.edges(l),v=a?f:c,D=!1,g="",C=0,p=0,h=0;for(var[o,A]of i.nodes(r,{at:t,reverse:a,voids:u,ignoreNonSelectable:s})){if(W.isElement(o)){if(!u&&(r.isVoid(o)||r.isElementReadOnly(o))){yield i.start(r,A);continue}if(r.isInline(o))continue;if(i.hasInlines(r,o)){var F=d.isAncestor(A,f.path)?f:i.end(r,A),w=d.isAncestor(A,c.path)?c:i.start(r,A);g=i.string(r,{anchor:w,focus:F},{voids:u}),D=!0}}if(z.isText(o)){var x=d.equals(A,v.path);for(x?(p=a?v.offset:o.text.length-v.offset,h=v.offset):(p=o.text.length,h=a?p:0),(x||D||n==="offset")&&(yield{path:A,offset:h},D=!1);;){if(C===0){if(g==="")break;C=I(g,n,a),g=mt(g,C,a)[1]}if(h=a?h-C:h+C,p=p-C,p<0){C=-p;break}C=0,yield{path:A,offset:h}}}}function I(k,j,q){return j==="character"?ht(k,q):j==="word"?xu(k,q):j==="line"||j==="block"?k.length:1}}()}var Ys=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=e.selection}=t;if(s){var l=i.before(e,s,{voids:a});if(l){var[,c]=i.first(e,[]),f=[l.path,c];if(d.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(u==null)if(d.isPath(s)){var[v]=i.parent(e,s);u=g=>v.children.includes(g)}else u=()=>!0;var[D]=i.nodes(e,{reverse:!0,at:f,match:u,mode:n,voids:a});return D}}},Xs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:l}=u,c=i.rangeRefs(e);return c.delete(u),u.current=null,l}},s=i.rangeRefs(e);return s.add(u),u},Js=r=>{var e=kt.get(r);return e||(e=new Set,kt.set(r,e)),e},Zs=(r,e,t)=>{if(B.isRange(e)&&!t)return e;var n=i.start(r,e),a=i.end(r,t||e);return{anchor:n,focus:a}};function on(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Qs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?on(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var _s=(r,e)=>{var{selection:t}=r;if(t){var n=(v,D)=>{if(!z.isText(v))return!1;var[g,C]=i.parent(r,D);return!r.isVoid(g)||r.markableVoid(g)},a=B.isExpanded(t),u=!1;if(!a){var[s,l]=i.node(r,t);if(s&&n(s,l)){var[c]=i.parent(r,l);u=c&&r.markableVoid(c)}}if(a||u)b.unsetNodes(r,e,{match:n,split:!0,voids:!0});else{var f=Qs({},i.marks(r)||{});delete f[e],r.marks=f,mr.get(r)||r.onChange()}}},ei=(r,e)=>{Yn.set(r,e)},ri=(r,e)=>i.point(r,e,{edge:"start"}),ti=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,u=i.range(e,t),[s,l]=B.edges(u),c="";for(var[f,v]of i.nodes(e,{at:u,match:z.isText,voids:a})){var D=f.text;d.equals(v,l.path)&&(D=D.slice(0,l.offset)),d.equals(v,s.path)&&(D=D.slice(s.offset)),c+=D}return c},ni=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,[u,s]=B.edges(t);if(u.offset!==0||s.offset!==0||B.isCollapsed(t)||d.hasPrevious(s.path))return t;var l=i.above(e,{at:s,match:p=>W.isElement(p)&&i.isBlock(e,p),voids:a}),c=l?l[1]:[],f=i.start(e,u),v={anchor:f,focus:s},D=!0;for(var[g,C]of i.nodes(e,{at:v,match:z.isText,reverse:!0,voids:a})){if(D){D=!1;continue}if(g.text!==""||d.isBefore(C,c)){s={path:C,offset:g.text.length};break}}return{anchor:u,focus:s}},ai=(r,e)=>{var t=i.isNormalizing(r);i.setNormalizing(r,!1);try{e()}finally{i.setNormalizing(r,t)}i.normalize(r)},ui=(r,e,t)=>{var[n,a]=e;return W.isElement(n)&&i.isEmpty(r,n)||z.isText(n)&&n.text===""&&a[a.length-1]!==0},si=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var n,a,{reverse:u=!1,unit:s="character",distance:l=1,voids:c=!1}=t,{at:f=e.selection,hanging:v=!1}=t;if(f){var D=!1;if(B.isRange(f)&&B.isCollapsed(f)&&(D=!0,f=f.anchor),Q.isPoint(f)){var g=i.void(e,{at:f,mode:"highest"});if(!c&&g){var[,C]=g;f=C}else{var p={unit:s,distance:l},h=u?i.before(e,f,p)||i.start(e,[]):i.after(e,f,p)||i.end(e,[]);f={anchor:f,focus:h},v=!0}}if(d.isPath(f)){b.removeNodes(e,{at:f,voids:c});return}if(!B.isCollapsed(f)){if(!v){var[,o]=B.edges(f),A=i.end(e,[]);Q.equals(o,A)||(f=i.unhangRange(e,f,{voids:c}))}var[F,w]=B.edges(f),x=i.above(e,{match:J=>W.isElement(J)&&i.isBlock(e,J),at:F,voids:c}),I=i.above(e,{match:J=>W.isElement(J)&&i.isBlock(e,J),at:w,voids:c}),k=x&&I&&!d.equals(x[1],I[1]),j=d.equals(F.path,w.path),q=c?null:(n=i.void(e,{at:F,mode:"highest"}))!==null&&n!==void 0?n:i.elementReadOnly(e,{at:F,mode:"highest"}),K=c?null:(a=i.void(e,{at:w,mode:"highest"}))!==null&&a!==void 0?a:i.elementReadOnly(e,{at:w,mode:"highest"});if(q){var H=i.before(e,F);H&&x&&d.isAncestor(x[1],H.path)&&(F=H)}if(K){var $=i.after(e,w);$&&I&&d.isAncestor(I[1],$.path)&&(w=$)}var O=[],L;for(var y of i.nodes(e,{at:f,voids:c})){var[N,re]=y;L&&d.compare(re,L)===0||(!c&&W.isElement(N)&&(i.isVoid(e,N)||i.isElementReadOnly(e,N))||!d.isCommon(re,F.path)&&!d.isCommon(re,w.path))&&(O.push(y),L=re)}var V=Array.from(O,J=>{var[,ie]=J;return i.pathRef(e,ie)}),ae=i.pointRef(e,F),_=i.pointRef(e,w),te="";if(!j&&!q){var oe=ae.current,[se]=i.leaf(e,oe),{path:Ce}=oe,{offset:Be}=F,X=se.text.slice(Be);X.length>0&&(e.apply({type:"remove_text",path:Ce,offset:Be,text:X}),te=X)}if(V.reverse().map(J=>J.unref()).filter(J=>J!==null).forEach(J=>b.removeNodes(e,{at:J,voids:c})),!K){var m=_.current,[M]=i.leaf(e,m),{path:T}=m,R=j?F.offset:0,ee=M.text.slice(R,w.offset);ee.length>0&&(e.apply({type:"remove_text",path:T,offset:R,text:ee}),te=ee)}!j&&k&&_.current&&ae.current&&b.mergeNodes(e,{at:_.current,hanging:!0,voids:c}),D&&u&&s==="character"&&te.length>1&&te.match(/[\u0E00-\u0E7F]+/)&&b.insertText(e,te.slice(0,te.length-l));var U=ae.unref(),ce=_.unref(),ne=u?U||ce:ce||U;t.at==null&&ne&&b.select(e,ne)}}})},ii=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1}=n,{at:s=gt(e),batchDirty:l=!0}=n;if(t.length){if(B.isRange(s))if(a||(s=i.unhangRange(e,s,{voids:u})),B.isCollapsed(s))s=s.anchor;else{var[,c]=B.edges(s);if(!u&&i.void(e,{at:c}))return;var f=i.pointRef(e,c);b.delete(e,{at:s}),s=f.unref()}else d.isPath(s)&&(s=i.start(e,s));if(!(!u&&i.void(e,{at:s}))){var v=i.above(e,{at:s,match:X=>W.isElement(X)&&i.isInline(e,X),mode:"highest",voids:u});if(v){var[,D]=v;if(i.isEnd(e,s,D)){var g=i.after(e,D);s=g}else if(i.isStart(e,s,D)){var C=i.before(e,D);s=C}}var p=i.above(e,{match:X=>W.isElement(X)&&i.isBlock(e,X),at:s,voids:u}),[,h]=p,o=i.isStart(e,s,h),A=i.isEnd(e,s,h),F=o&&A,w=!o||o&&A,x=!A,[,I]=S.first({children:t},[]),[,k]=S.last({children:t},[]),j=[],q=X=>{var[m,M]=X,T=M.length===0;return T?!1:F?!0:!(w&&d.isAncestor(M,I)&&W.isElement(m)&&!e.isVoid(m)&&!e.isInline(m)||x&&d.isAncestor(M,k)&&W.isElement(m)&&!e.isVoid(m)&&!e.isInline(m))};for(var K of S.nodes({children:t},{pass:q}))q(K)&&j.push(K);var H=[],$=[],O=[],L=!0,y=!1;for(var[N]of j)W.isElement(N)&&!e.isInline(N)?(L=!1,y=!0,$.push(N)):L?H.push(N):O.push(N);var[re]=i.nodes(e,{at:s,match:X=>z.isText(X)||i.isInline(e,X),mode:"highest",voids:u}),[,V]=re,ae=i.isStart(e,s,V),_=i.isEnd(e,s,V),te=i.pathRef(e,A&&!O.length?d.next(h):h),oe=i.pathRef(e,_?d.next(V):V);b.splitNodes(e,{at:s,match:X=>y?W.isElement(X)&&i.isBlock(e,X):z.isText(X)||i.isInline(e,X),mode:y?"lowest":"highest",always:y&&(!o||H.length>0)&&(!A||O.length>0),voids:u});var se=i.pathRef(e,!ae||ae&&_?d.next(V):V);if(b.insertNodes(e,H,{at:se.current,match:X=>z.isText(X)||i.isInline(e,X),mode:"highest",voids:u,batchDirty:l}),F&&!H.length&&$.length&&!O.length&&b.delete(e,{at:h,voids:u}),b.insertNodes(e,$,{at:te.current,match:X=>W.isElement(X)&&i.isBlock(e,X),mode:"lowest",voids:u,batchDirty:l}),b.insertNodes(e,O,{at:oe.current,match:X=>z.isText(X)||i.isInline(e,X),mode:"highest",voids:u,batchDirty:l}),!n.at){var Ce;if(O.length>0&&oe.current?Ce=d.previous(oe.current):$.length>0&&te.current?Ce=d.previous(te.current):se.current&&(Ce=d.previous(se.current)),Ce){var Be=i.end(e,Ce);b.select(e,Be)}}se.unref(),te.unref(),oe.unref()}}})},oi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=t,{selection:a}=e;if(a){if(n==="anchor")b.select(e,a.anchor);else if(n==="focus")b.select(e,a.focus);else if(n==="start"){var[u]=B.edges(a);b.select(e,u)}else if(n==="end"){var[,s]=B.edges(a);b.select(e,s)}}else return},li=r=>{var{selection:e}=r;e&&r.apply({type:"set_selection",properties:e,newProperties:null})},fi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:a=1,unit:u="character",reverse:s=!1}=t,{edge:l=null}=t;if(n){l==="start"&&(l=B.isBackward(n)?"focus":"anchor"),l==="end"&&(l=B.isBackward(n)?"anchor":"focus");var{anchor:c,focus:f}=n,v={distance:a,unit:u,ignoreNonSelectable:!0},D={};if(l==null||l==="anchor"){var g=s?i.before(e,c,v):i.after(e,c,v);g&&(D.anchor=g)}if(l==null||l==="focus"){var C=s?i.before(e,f,v):i.after(e,f,v);C&&(D.focus=C)}b.setSelection(e,D)}},ci=(r,e)=>{var{selection:t}=r;if(e=i.range(r,e),t){b.setSelection(r,e);return}if(!B.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(pe.stringify(e)));r.apply({type:"set_selection",properties:t,newProperties:e})};function ln(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function fn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ln(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var vi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a}=e,{edge:u="both"}=n;if(a){u==="start"&&(u=B.isBackward(a)?"focus":"anchor"),u==="end"&&(u=B.isBackward(a)?"anchor":"focus");var{anchor:s,focus:l}=a,c=u==="anchor"?s:l;b.setSelection(e,{[u==="anchor"?"anchor":"focus"]:fn(fn({},c),t)})}},di=(r,e)=>{var{selection:t}=r,n={},a={};if(t){for(var u in e)(u==="anchor"&&e.anchor!=null&&!Q.equals(e.anchor,t.anchor)||u==="focus"&&e.focus!=null&&!Q.equals(e.focus,t.focus)||u!=="anchor"&&u!=="focus"&&e[u]!==t[u])&&(n[u]=t[u],a[u]=e[u]);Object.keys(n).length>0&&r.apply({type:"set_selection",properties:n,newProperties:a})}},Di=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1,mode:s="lowest",batchDirty:l=!0}=n,{at:c,match:f,select:v}=n;if(S.isNode(t)&&(t=[t]),t.length!==0){var[D]=t;if(c||(c=gt(e),v!==!1&&(v=!0)),v==null&&(v=!1),B.isRange(c))if(a||(c=i.unhangRange(e,c,{voids:u})),B.isCollapsed(c))c=c.anchor;else{var[,g]=B.edges(c),C=i.pointRef(e,g);b.delete(e,{at:c}),c=C.unref()}if(Q.isPoint(c)){f==null&&(z.isText(D)?f=H=>z.isText(H):e.isInline(D)?f=H=>z.isText(H)||i.isInline(e,H):f=H=>W.isElement(H)&&i.isBlock(e,H));var[p]=i.nodes(e,{at:c.path,match:f,mode:s,voids:u});if(p){var[,h]=p,o=i.pathRef(e,h),A=i.isEnd(e,c,h);b.splitNodes(e,{at:c,match:f,mode:s,voids:u});var F=o.unref();c=A?d.next(F):F}else return}var w=d.parent(c),x=c[c.length-1];if(!(!u&&i.void(e,{at:w}))){if(l){var I=[],k=d.levels(w);Ju(e,()=>{var H=function(){var L=w.concat(x);x++;var y={type:"insert_node",path:L,node:$};e.apply(y),c=d.next(c),I.push(y),z.isText?k.push(...Array.from(S.nodes($),N=>{var[,re]=N;return L.concat(re)})):k.push(L)};for(var $ of t)H()},()=>{Jn(e,k,H=>{var $=H;for(var O of I)if(d.operationCanTransformPath(O)&&($=d.transform($,O),!$))return null;return $})})}else for(var j of t){var q=w.concat(x);x++,e.apply({type:"insert_node",path:q,node:j}),c=d.next(c)}if(c=d.previous(c),v){var K=i.end(e,c);K&&b.select(e,K)}}}})},gi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:a="lowest",voids:u=!1}=t,{match:s}=t;if(s==null&&(s=d.isPath(n)?dr(e,n):x=>W.isElement(x)&&i.isBlock(e,x)),!!n){var l=i.nodes(e,{at:n,match:s,mode:a,voids:u}),c=Array.from(l,x=>{var[,I]=x;return i.pathRef(e,I)});for(var f of c){var v=f.unref();if(v.length<2)throw new Error("Cannot lift node at a path [".concat(v,"] because it has a depth of less than `2`."));var D=i.node(e,d.parent(v)),[g,C]=D,p=v[v.length-1],{length:h}=g.children;if(h===1){var o=d.next(C);b.moveNodes(e,{at:v,to:o,voids:u}),b.removeNodes(e,{at:C,voids:u})}else if(p===0)b.moveNodes(e,{at:v,to:C,voids:u});else if(p===h-1){var A=d.next(C);b.moveNodes(e,{at:v,to:A,voids:u})}else{var F=d.next(v),w=d.next(C);b.splitNodes(e,{at:F,voids:u}),b.moveNodes(e,{at:v,to:w,voids:u})}}}})},hi=["text"],mi=["children"],Zn=(r,e)=>{if(W.isElement(e)){var t=e;return i.isVoid(r,e)?!0:t.children.length===1?Zn(r,t.children[0]):!1}else return!i.isEditor(e)},Ci=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{match:n,at:a=e.selection}=t,{hanging:u=!1,voids:s=!1,mode:l="lowest"}=t;if(a){if(n==null)if(d.isPath(a)){var[c]=i.parent(e,a);n=H=>c.children.includes(H)}else n=H=>W.isElement(H)&&i.isBlock(e,H);if(!u&&B.isRange(a)&&(a=i.unhangRange(e,a,{voids:s})),B.isRange(a))if(B.isCollapsed(a))a=a.anchor;else{var[,f]=B.edges(a),v=i.pointRef(e,f);b.delete(e,{at:a}),a=v.unref(),t.at==null&&b.select(e,a)}var[D]=i.nodes(e,{at:a,match:n,voids:s,mode:l}),g=i.previous(e,{at:a,match:n,voids:s,mode:l});if(!(!D||!g)){var[C,p]=D,[h,o]=g;if(!(p.length===0||o.length===0)){var A=d.next(o),F=d.common(p,o),w=d.isSibling(p,o),x=Array.from(i.levels(e,{at:p}),H=>{var[$]=H;return $}).slice(F.length).slice(0,-1),I=i.above(e,{at:p,mode:"highest",match:H=>x.includes(H)&&Zn(e,H)}),k=I&&i.pathRef(e,I[1]),j,q;if(z.isText(C)&&z.isText(h)){var K=He(C,hi);q=h.text.length,j=K}else if(W.isElement(C)&&W.isElement(h)){var K=He(C,mi);q=h.children.length,j=K}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(pe.stringify(C)," ").concat(pe.stringify(h)));w||b.moveNodes(e,{at:p,to:A,voids:s}),k&&b.removeNodes(e,{at:k.current,voids:s}),i.shouldMergeNodesRemovePrevNode(e,g,D)?b.removeNodes(e,{at:o,voids:s}):e.apply({type:"merge_node",path:A,position:q,properties:j}),k&&k.unref()}}}})},pi=(r,e)=>{i.withoutNormalizing(r,()=>{var{to:t,at:n=r.selection,mode:a="lowest",voids:u=!1}=e,{match:s}=e;if(n){s==null&&(s=d.isPath(n)?dr(r,n):C=>W.isElement(C)&&i.isBlock(r,C));var l=i.pathRef(r,t),c=i.nodes(r,{at:n,match:s,mode:a,voids:u}),f=Array.from(c,C=>{var[,p]=C;return i.pathRef(r,p)});for(var v of f){var D=v.unref(),g=l.current;D.length!==0&&r.apply({type:"move_node",path:D,newPath:g}),l.current&&d.isSibling(g,D)&&d.isAfter(g,D)&&(l.current=d.next(l.current))}l.unref()}})},Bi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1,mode:u="lowest"}=t,{at:s=e.selection,match:l}=t;if(s){l==null&&(l=d.isPath(s)?dr(e,s):C=>W.isElement(C)&&i.isBlock(e,C)),!n&&B.isRange(s)&&(s=i.unhangRange(e,s,{voids:a}));var c=i.nodes(e,{at:s,match:l,mode:u,voids:a}),f=Array.from(c,C=>{var[,p]=C;return i.pathRef(e,p)});for(var v of f){var D=v.unref();if(D){var[g]=i.node(e,D);e.apply({type:"remove_node",path:D,node:g})}}}})},Ei=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{match:a,at:u=e.selection,compare:s,merge:l}=n,{hanging:c=!1,mode:f="lowest",split:v=!1,voids:D=!1}=n;if(u){if(a==null&&(a=d.isPath(u)?dr(e,u):q=>W.isElement(q)&&i.isBlock(e,q)),!c&&B.isRange(u)&&(u=i.unhangRange(e,u,{voids:D})),v&&B.isRange(u)){if(B.isCollapsed(u)&&i.leaf(e,u.anchor)[0].text.length>0)return;var g=i.rangeRef(e,u,{affinity:"inward"}),[C,p]=B.edges(u),h=f==="lowest"?"lowest":"highest",o=i.isEnd(e,p,p.path);b.splitNodes(e,{at:p,match:a,mode:h,voids:D,always:!o});var A=i.isStart(e,C,C.path);b.splitNodes(e,{at:C,match:a,mode:h,voids:D,always:!A}),u=g.unref(),n.at==null&&b.select(e,u)}s||(s=(q,K)=>q!==K);for(var[F,w]of i.nodes(e,{at:u,match:a,mode:f,voids:D})){var x={},I={};if(w.length!==0){var k=!1;for(var j in t)j==="children"||j==="text"||s(t[j],F[j])&&(k=!0,F.hasOwnProperty(j)&&(x[j]=F[j]),l?t[j]!=null&&(I[j]=l(F[j],t[j])):t[j]!=null&&(I[j]=t[j]));k&&e.apply({type:"set_node",path:w,properties:x,newProperties:I})}}}})},Ai=(r,e)=>{if(B.isCollapsed(e))return e.anchor;var[,t]=B.edges(e),n=i.pointRef(r,t);return b.delete(r,{at:e}),n.unref()},Fi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:a=!1}=t,{match:u,at:s=e.selection,height:l=0,always:c=!1}=t;if(u==null&&(u=_=>W.isElement(_)&&i.isBlock(e,_)),B.isRange(s)&&(s=Ai(e,s)),d.isPath(s)){var f=s,v=i.point(e,f),[D]=i.parent(e,f);u=_=>_===D,l=v.path.length-f.length+1,s=v,c=!0}if(s){var g=i.pointRef(e,s,{affinity:"backward"}),C;try{var[p]=i.nodes(e,{at:s,match:u,mode:n,voids:a});if(!p)return;var h=i.void(e,{at:s,mode:"highest"}),o=0;if(!a&&h){var[A,F]=h;if(W.isElement(A)&&e.isInline(A)){var w=i.after(e,F);if(!w){var x={text:""},I=d.next(F);b.insertNodes(e,x,{at:I,voids:a}),w=i.point(e,I)}s=w,c=!0}var k=s.path.length-F.length;l=k+1,c=!0}C=i.pointRef(e,s);var j=s.path.length-l,[,q]=p,K=s.path.slice(0,j),H=l===0?s.offset:s.path[j]+o;for(var[$,O]of i.levels(e,{at:K,reverse:!0,voids:a})){var L=!1;if(O.length<q.length||O.length===0||!a&&W.isElement($)&&i.isVoid(e,$))break;var y=g.current,N=i.isEnd(e,y,O);if(c||!g||!i.isEdge(e,y,O)){L=!0;var re=S.extractProps($);e.apply({type:"split_node",path:O,position:H,properties:re})}H=O[O.length-1]+(L||N?1:0)}if(t.at==null){var V=C.current||i.end(e,[]);b.select(e,V)}}finally{var ae;g.unref(),(ae=C)===null||ae===void 0||ae.unref()}}})},bi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var a={};for(var u of t)a[u]=null;b.setNodes(e,a,n)},wi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{mode:n="lowest",split:a=!1,voids:u=!1}=t,{at:s=e.selection,match:l}=t;if(s){l==null&&(l=d.isPath(s)?dr(e,s):C=>W.isElement(C)&&i.isBlock(e,C)),d.isPath(s)&&(s=i.range(e,s));var c=B.isRange(s)?i.rangeRef(e,s):null,f=i.nodes(e,{at:s,match:l,mode:n,voids:u}),v=Array.from(f,C=>{var[,p]=C;return i.pathRef(e,p)}).reverse(),D=function(){var p=g.unref(),[h]=i.node(e,p),o=i.range(e,p);a&&c&&(o=B.intersection(c.current,o)),b.liftNodes(e,{at:o,match:A=>W.isAncestor(h)&&h.children.includes(A),voids:u})};for(var g of v)D();c&&c.unref()}})};function cn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function vn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Oi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{mode:a="lowest",split:u=!1,voids:s=!1}=n,{match:l,at:c=e.selection}=n;if(c){if(l==null&&(d.isPath(c)?l=dr(e,c):e.isInline(t)?l=o=>W.isElement(o)&&i.isInline(e,o)||z.isText(o):l=o=>W.isElement(o)&&i.isBlock(e,o)),u&&B.isRange(c)){var[f,v]=B.edges(c),D=i.rangeRef(e,c,{affinity:"inward"});b.splitNodes(e,{at:v,match:l,voids:s}),b.splitNodes(e,{at:f,match:l,voids:s}),c=D.unref(),n.at==null&&b.select(e,c)}var g=Array.from(i.nodes(e,{at:c,match:e.isInline(t)?o=>W.isElement(o)&&i.isBlock(e,o):o=>i.isEditor(o),mode:"lowest",voids:s})),C=function(){var A=B.isRange(c)?B.intersection(c,i.range(e,h)):c;if(!A)return 0;var F=Array.from(i.nodes(e,{at:A,match:l,mode:a,voids:s}));if(F.length>0){var[w]=F,x=F[F.length-1],[,I]=w,[,k]=x;if(I.length===0&&k.length===0)return 0;var j=d.equals(I,k)?d.parent(I):d.common(I,k),q=i.range(e,I,k),K=i.node(e,j),[H]=K,$=j.length+1,O=d.next(k.slice(0,$)),L=vn(vn({},t),{},{children:[]});b.insertNodes(e,L,{at:O,voids:s}),b.moveNodes(e,{at:q,match:y=>W.isAncestor(H)&&H.children.includes(y),to:O.concat(0),voids:s})}},p;for(var[,h]of g)p=C()}})},yi=()=>{var r={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zu(r,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ns(r,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ss(r,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return is(r,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return os(r,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _u(r,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ps(r,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Es(r,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ii(r,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Bs(r,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Fs(r,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return es(r,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _s(r,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Qu(r,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return rs(r,...n)},above:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ts(r,...n)},after:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return as(r,...n)},before:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return us(r,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return oi(r,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return si(r,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return li(r,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ls(r,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return fs(r,...n)},end:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return cs(r,...n)},first:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vs(r,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ds(r,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ms(r,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return gs(r,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return hs(r,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ms(r,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Cs(r,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Di(r,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bs(r,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ws(r,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Os(r,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ys(r,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return xs(r,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ss(r,...n)},last:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ps(r,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ts(r,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return js(r,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return gi(r,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ci(r,...n)},move:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return fi(r,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return pi(r,...n)},next:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Is(r,...n)},node:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ks(r,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ls(r,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return $s(r,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return zs(r,...n)},path:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return qs(r,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ws(r,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Hs(r,...n)},point:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Us(r,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Vs(r,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ks(r,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Gs(r,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ys(r,...n)},range:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zs(r,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Xs(r,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Js(r,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Bi(r,...n)},select:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ci(r,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ei(r,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ei(r,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vi(r,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return di(r,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Fi(r,...n)},start:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ri(r,...n)},string:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ti(r,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ni(r,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bi(r,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return wi(r,...n)},void:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ds(r,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ai(r,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Oi(r,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ui(r,...n)}};return r},xi=Ti,Qn="---",_n="A-Za-z--------",Si=new RegExp("^[^"+_n+"]*["+Qn+"]"),Pi=new RegExp("^[^"+Qn+"]*["+_n+"]");function Ti(r){return r=String(r||""),Si.test(r)?"rtl":Pi.test(r)?"ltr":"neutral"}const ea=Wr(xi);function ji(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Ct=ji,Ri=typeof Or=="object"&&Or&&Or.Object===Object&&Or,Ni=Ri,Mi=Ni,Ii=typeof self=="object"&&self&&self.Object===Object&&self,ki=Mi||Ii||Function("return this")(),ra=ki,Li=ra,$i=function(){return Li.Date.now()},zi=$i,Wi=/\s/;function Hi(r){for(var e=r.length;e--&&Wi.test(r.charAt(e)););return e}var qi=Hi,Vi=qi,Ki=/^\s+/;function Ui(r){return r&&r.slice(0,Vi(r)+1).replace(Ki,"")}var Gi=Ui,Yi=ra,Xi=Yi.Symbol,ta=Xi,dn=ta,na=Object.prototype,Ji=na.hasOwnProperty,Zi=na.toString,hr=dn?dn.toStringTag:void 0;function Qi(r){var e=Ji.call(r,hr),t=r[hr];try{r[hr]=void 0;var n=!0}catch{}var a=Zi.call(r);return n&&(e?r[hr]=t:delete r[hr]),a}var _i=Qi,eo=Object.prototype,ro=eo.toString;function to(r){return ro.call(r)}var no=to,Dn=ta,ao=_i,uo=no,so="[object Null]",io="[object Undefined]",gn=Dn?Dn.toStringTag:void 0;function oo(r){return r==null?r===void 0?io:so:gn&&gn in Object(r)?ao(r):uo(r)}var lo=oo;function fo(r){return r!=null&&typeof r=="object"}var co=fo,vo=lo,Do=co,go="[object Symbol]";function ho(r){return typeof r=="symbol"||Do(r)&&vo(r)==go}var mo=ho,Co=Gi,hn=Ct,po=mo,mn=NaN,Bo=/^[-+]0x[0-9a-f]+$/i,Eo=/^0b[01]+$/i,Ao=/^0o[0-7]+$/i,Fo=parseInt;function bo(r){if(typeof r=="number")return r;if(po(r))return mn;if(hn(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=hn(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Co(r);var t=Eo.test(r);return t||Ao.test(r)?Fo(r.slice(2),t?2:8):Bo.test(r)?mn:+r}var wo=bo,Oo=Ct,Gr=zi,Cn=wo,yo="Expected a function",xo=Math.max,So=Math.min;function Po(r,e,t){var n,a,u,s,l,c,f=0,v=!1,D=!1,g=!0;if(typeof r!="function")throw new TypeError(yo);e=Cn(e)||0,Oo(t)&&(v=!!t.leading,D="maxWait"in t,u=D?xo(Cn(t.maxWait)||0,e):u,g="trailing"in t?!!t.trailing:g);function C(k){var j=n,q=a;return n=a=void 0,f=k,s=r.apply(q,j),s}function p(k){return f=k,l=setTimeout(A,e),v?C(k):s}function h(k){var j=k-c,q=k-f,K=e-j;return D?So(K,u-q):K}function o(k){var j=k-c,q=k-f;return c===void 0||j>=e||j<0||D&&q>=u}function A(){var k=Gr();if(o(k))return F(k);l=setTimeout(A,h(k))}function F(k){return l=void 0,g&&n?C(k):(n=a=void 0,s)}function w(){l!==void 0&&clearTimeout(l),f=0,n=c=a=l=void 0}function x(){return l===void 0?s:F(Gr())}function I(){var k=Gr(),j=o(k);if(n=arguments,a=this,c=k,j){if(l===void 0)return p(c);if(D)return clearTimeout(l),l=setTimeout(A,e),C(c)}return l===void 0&&(l=setTimeout(A,e)),s}return I.cancel=w,I.flush=x,I}var aa=Po;const To=Wr(aa);var jo=aa,Ro=Ct,No="Expected a function";function Mo(r,e,t){var n=!0,a=!0;if(typeof r!="function")throw new TypeError(No);return Ro(t)&&(n="leading"in t?!!t.leading:n,a="trailing"in t?!!t.trailing:a),jo(r,e,{leading:n,maxWait:e,trailing:a})}var Io=Mo;const ko=Wr(Io),pn=r=>typeof r=="object"&&r!=null&&r.nodeType===1,Bn=(r,e)=>(!e||r!=="hidden")&&r!=="visible"&&r!=="clip",Yr=(r,e)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){const t=getComputedStyle(r,null);return Bn(t.overflowY,e)||Bn(t.overflowX,e)||(n=>{const a=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)})(r)}return!1},xr=(r,e,t,n,a,u,s,l)=>u<r&&s>e||u>r&&s<e?0:u<=r&&l<=t||s>=e&&l>=t?u-r-n:s>e&&l<t||u<r&&l>t?s-e+a:0,Lo=r=>{const e=r.parentElement;return e??(r.getRootNode().host||null)},En=(r,e)=>{var t,n,a,u;if(typeof document>"u")return[];const{scrollMode:s,block:l,inline:c,boundary:f,skipOverflowHiddenElements:v}=e,D=typeof f=="function"?f:re=>re!==f;if(!pn(r))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,C=[];let p=r;for(;pn(p)&&D(p);){if(p=Lo(p),p===g){C.push(p);break}p!=null&&p===document.body&&Yr(p)&&!Yr(document.documentElement)||p!=null&&Yr(p,v)&&C.push(p)}const h=(n=(t=window.visualViewport)==null?void 0:t.width)!=null?n:innerWidth,o=(u=(a=window.visualViewport)==null?void 0:a.height)!=null?u:innerHeight,{scrollX:A,scrollY:F}=window,{height:w,width:x,top:I,right:k,bottom:j,left:q}=r.getBoundingClientRect(),{top:K,right:H,bottom:$,left:O}=(re=>{const V=window.getComputedStyle(re);return{top:parseFloat(V.scrollMarginTop)||0,right:parseFloat(V.scrollMarginRight)||0,bottom:parseFloat(V.scrollMarginBottom)||0,left:parseFloat(V.scrollMarginLeft)||0}})(r);let L=l==="start"||l==="nearest"?I-K:l==="end"?j+$:I+w/2-K+$,y=c==="center"?q+x/2-O+H:c==="end"?k+H:q-O;const N=[];for(let re=0;re<C.length;re++){const V=C[re],{height:ae,width:_,top:te,right:oe,bottom:se,left:Ce}=V.getBoundingClientRect();if(s==="if-needed"&&I>=0&&q>=0&&j<=o&&k<=h&&I>=te&&j<=se&&q>=Ce&&k<=oe)return N;const Be=getComputedStyle(V),X=parseInt(Be.borderLeftWidth,10),m=parseInt(Be.borderTopWidth,10),M=parseInt(Be.borderRightWidth,10),T=parseInt(Be.borderBottomWidth,10);let R=0,ee=0;const U="offsetWidth"in V?V.offsetWidth-V.clientWidth-X-M:0,ce="offsetHeight"in V?V.offsetHeight-V.clientHeight-m-T:0,ne="offsetWidth"in V?V.offsetWidth===0?0:_/V.offsetWidth:0,J="offsetHeight"in V?V.offsetHeight===0?0:ae/V.offsetHeight:0;if(g===V)R=l==="start"?L:l==="end"?L-o:l==="nearest"?xr(F,F+o,o,m,T,F+L,F+L+w,w):L-o/2,ee=c==="start"?y:c==="center"?y-h/2:c==="end"?y-h:xr(A,A+h,h,X,M,A+y,A+y+x,x),R=Math.max(0,R+F),ee=Math.max(0,ee+A);else{R=l==="start"?L-te-m:l==="end"?L-se+T+ce:l==="nearest"?xr(te,se,ae,m,T+ce,L,L+w,w):L-(te+ae/2)+ce/2,ee=c==="start"?y-Ce-X:c==="center"?y-(Ce+_/2)+U/2:c==="end"?y-oe+M+U:xr(Ce,oe,_,X,M+U,y,y+x,x);const{scrollLeft:ie,scrollTop:ve}=V;R=J===0?0:Math.max(0,Math.min(ve+R/J,V.scrollHeight-ae/J+ce)),ee=ne===0?0:Math.max(0,Math.min(ie+ee/ne,V.scrollWidth-_/ne+U)),L+=ve-R,y+=ie-ee}N.push({el:V,top:R,left:ee})}return N},$o=r=>r===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(r)?r:{block:"start",inline:"nearest"};function zo(r,e){if(!r.isConnected||!(a=>{let u=a;for(;u&&u.parentNode;){if(u.parentNode===document)return!0;u=u.parentNode instanceof ShadowRoot?u.parentNode.host:u.parentNode}return!1})(r))return;const t=(a=>{const u=window.getComputedStyle(a);return{top:parseFloat(u.scrollMarginTop)||0,right:parseFloat(u.scrollMarginRight)||0,bottom:parseFloat(u.scrollMarginBottom)||0,left:parseFloat(u.scrollMarginLeft)||0}})(r);if((a=>typeof a=="object"&&typeof a.behavior=="function")(e))return e.behavior(En(r,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:a,top:u,left:s}of En(r,$o(e))){const l=u-t.top+t.bottom,c=s-t.left+t.right;a.scroll({top:l,left:c,behavior:n})}}var rr=[],Wo=function(){return rr.some(function(r){return r.activeTargets.length>0})},Ho=function(){return rr.some(function(r){return r.skippedTargets.length>0})},An="ResizeObserver loop completed with undelivered notifications.",qo=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:An}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=An),window.dispatchEvent(r)},Ar;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Ar||(Ar={}));var tr=function(r){return Object.freeze(r)},Vo=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,tr(this)}return r}(),ua=function(){function r(e,t,n,a){return this.x=e,this.y=t,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,tr(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,a=e.top,u=e.right,s=e.bottom,l=e.left,c=e.width,f=e.height;return{x:t,y:n,top:a,right:u,bottom:s,left:l,width:c,height:f}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),pt=function(r){return r instanceof SVGElement&&"getBBox"in r},sa=function(r){if(pt(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var a=r,u=a.offsetWidth,s=a.offsetHeight;return!(u||s||r.getClientRects().length)},Fn=function(r){var e;if(r instanceof Element)return!0;var t=(e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},Ko=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Cr=typeof window<"u"?window:{},Sr=new WeakMap,bn=/auto|scroll/,Uo=/^tb|vertical/,Go=/msie|trident/i.test(Cr.navigator&&Cr.navigator.userAgent),Le=function(r){return parseFloat(r||"0")},fr=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new Vo((t?e:r)||0,(t?r:e)||0)},wn=tr({devicePixelContentBoxSize:fr(),borderBoxSize:fr(),contentBoxSize:fr(),contentRect:new ua(0,0,0,0)}),ia=function(r,e){if(e===void 0&&(e=!1),Sr.has(r)&&!e)return Sr.get(r);if(sa(r))return Sr.set(r,wn),wn;var t=getComputedStyle(r),n=pt(r)&&r.ownerSVGElement&&r.getBBox(),a=!Go&&t.boxSizing==="border-box",u=Uo.test(t.writingMode||""),s=!n&&bn.test(t.overflowY||""),l=!n&&bn.test(t.overflowX||""),c=n?0:Le(t.paddingTop),f=n?0:Le(t.paddingRight),v=n?0:Le(t.paddingBottom),D=n?0:Le(t.paddingLeft),g=n?0:Le(t.borderTopWidth),C=n?0:Le(t.borderRightWidth),p=n?0:Le(t.borderBottomWidth),h=n?0:Le(t.borderLeftWidth),o=D+f,A=c+v,F=h+C,w=g+p,x=l?r.offsetHeight-w-r.clientHeight:0,I=s?r.offsetWidth-F-r.clientWidth:0,k=a?o+F:0,j=a?A+w:0,q=n?n.width:Le(t.width)-k-I,K=n?n.height:Le(t.height)-j-x,H=q+o+I+F,$=K+A+x+w,O=tr({devicePixelContentBoxSize:fr(Math.round(q*devicePixelRatio),Math.round(K*devicePixelRatio),u),borderBoxSize:fr(H,$,u),contentBoxSize:fr(q,K,u),contentRect:new ua(D,c,q,K)});return Sr.set(r,O),O},oa=function(r,e,t){var n=ia(r,t),a=n.borderBoxSize,u=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Ar.DEVICE_PIXEL_CONTENT_BOX:return s;case Ar.BORDER_BOX:return a;default:return u}},Yo=function(){function r(e){var t=ia(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=tr([t.borderBoxSize]),this.contentBoxSize=tr([t.contentBoxSize]),this.devicePixelContentBoxSize=tr([t.devicePixelContentBoxSize])}return r}(),la=function(r){if(sa(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},Xo=function(){var r=1/0,e=[];rr.forEach(function(s){if(s.activeTargets.length!==0){var l=[];s.activeTargets.forEach(function(f){var v=new Yo(f.target),D=la(f.target);l.push(v),f.lastReportedSize=oa(f.target,f.observedBox),D<r&&(r=D)}),e.push(function(){s.callback.call(s.observer,l,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var a=n[t];a()}return r},On=function(r){rr.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(a){a.isActive()&&(la(a.target)>r?t.activeTargets.push(a):t.skippedTargets.push(a))})})},Jo=function(){var r=0;for(On(r);Wo();)r=Xo(),On(r);return Ho()&&qo(),r>0},Xr,fa=[],Zo=function(){return fa.splice(0).forEach(function(r){return r()})},Qo=function(r){if(!Xr){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Zo()}).observe(t,n),Xr=function(){t.textContent="".concat(e?e--:e++)}}fa.push(r),Xr()},_o=function(r){Qo(function(){requestAnimationFrame(r)})},Mr=0,el=function(){return!!Mr},rl=250,tl={attributes:!0,characterData:!0,childList:!0,subtree:!0},yn=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],xn=function(r){return r===void 0&&(r=0),Date.now()+r},Jr=!1,nl=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=rl),!Jr){Jr=!0;var n=xn(e);_o(function(){var a=!1;try{a=Jo()}finally{if(Jr=!1,e=n-xn(),!el())return;a?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,tl)};document.body?t():Cr.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),yn.forEach(function(t){return Cr.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),yn.forEach(function(t){return Cr.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),at=new nl,Sn=function(r){!Mr&&r>0&&at.start(),Mr+=r,!Mr&&at.stop()},al=function(r){return!pt(r)&&!Ko(r)&&getComputedStyle(r).display==="inline"},ul=function(){function r(e,t){this.target=e,this.observedBox=t||Ar.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=oa(this.target,this.observedBox,!0);return al(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),sl=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),Pr=new WeakMap,Pn=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},Tr=function(){function r(){}return r.connect=function(e,t){var n=new sl(e,t);Pr.set(e,n)},r.observe=function(e,t,n){var a=Pr.get(e),u=a.observationTargets.length===0;Pn(a.observationTargets,t)<0&&(u&&rr.push(a),a.observationTargets.push(new ul(t,n&&n.box)),Sn(1),at.schedule())},r.unobserve=function(e,t){var n=Pr.get(e),a=Pn(n.observationTargets,t),u=n.observationTargets.length===1;a>=0&&(u&&rr.splice(rr.indexOf(n),1),n.observationTargets.splice(a,1),Sn(-1))},r.disconnect=function(e){var t=this,n=Pr.get(e);n.observationTargets.slice().forEach(function(a){return t.unobserve(e,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),il=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Tr.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fn(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Tr.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fn(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Tr.unobserve(this,e)},r.prototype.disconnect=function(){Tr.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}(),qe={};Object.defineProperty(qe,"__esModule",{value:!0});var ol=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Zr={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ca={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:ol?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Bt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var jr=1;jr<20;jr++)Bt["f"+jr]=111+jr;function qr(r,e,t){e&&!("byKey"in e)&&(t=e,e=null),Array.isArray(r)||(r=[r]);var n=r.map(function(s){return va(s,e)}),a=function(l){return n.some(function(c){return da(c,l)})},u=t==null?a:a(t);return u}function ll(r,e){return qr(r,e)}function fl(r,e){return qr(r,{byKey:!0},e)}function va(r,e){var t=e&&e.byKey,n={};r=r.replace("++","+add");var a=r.split("+"),u=a.length;for(var s in Zr)n[Zr[s]]=!1;var l=!0,c=!1,f=void 0;try{for(var v=a[Symbol.iterator](),D;!(l=(D=v.next()).done);l=!0){var g=D.value,C=g.endsWith("?")&&g.length>1;C&&(g=g.slice(0,-1));var p=Et(g),h=Zr[p];if(g.length>1&&!h&&!ca[g]&&!Bt[p])throw new TypeError('Unknown modifier: "'+g+'"');(u===1||!h)&&(t?n.key=p:n.which=Da(g)),h&&(n[h]=C?null:!0)}}catch(o){c=!0,f=o}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}return n}function da(r,e){for(var t in r){var n=r[t],a=void 0;if(n!=null&&(t==="key"&&e.key!=null?a=e.key.toLowerCase():t==="which"?a=n===91&&e.which===93?91:e.which:a=e[t],!(a==null&&n===!1)&&a!==n))return!1}return!0}function Da(r){r=Et(r);var e=Bt[r]||r.toUpperCase().charCodeAt(0);return e}function Et(r){return r=r.toLowerCase(),r=ca[r]||r,r}qe.default=qr;var Qr=qe.isHotkey=qr;qe.isCodeHotkey=ll;qe.isKeyHotkey=fl;qe.parseHotkey=va;qe.compareHotkey=da;qe.toKeyCode=Da;qe.toKeyName=Et;function cl(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function cr(r,e){if(r==null)return{};var t=cl(r,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Fr(r){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(r)}function vl(r,e){if(Fr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Fr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function dl(r){var e=vl(r,"string");return Fr(e)==="symbol"?e:String(e)}function Te(r,e,t){return e=dl(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var At=P.createContext(null),Je=()=>{var r=P.useContext(At);if(!r)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return r},_r,et,ga=parseInt(Z.version.split(".")[0],10),ha=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Tn=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),we=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ir=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),_e=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Dl=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),ma=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),gl=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),hl=we&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),ml=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Cl=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),pl=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Ir=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((_r=navigator.userAgent.match(/Version\/(\d+)/))!==null&&_r!==void 0&&_r[1]&&parseInt((et=navigator.userAgent.match(/Version\/(\d+)/))===null||et===void 0?void 0:et[1],10)<17);var Ve=(!gl||!hl)&&!Dl&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Ft=new WeakMap,bt=new WeakMap,Ca=new WeakMap,kr=new WeakMap,ut=new WeakMap,br=new WeakMap,nr=new WeakMap,zr=new WeakMap,Vr=new WeakMap,st=new WeakMap,Ye=new WeakMap,er=new WeakMap,pr=new WeakMap,it=new WeakMap,wt=new WeakMap,Ne=new WeakMap,We=new WeakMap,xe=new WeakMap,Ke=new WeakMap,Ue=new WeakMap,pa=new WeakMap,vr=Symbol("placeholder"),Ba=Symbol("mark-placeholder"),Bl=globalThis.Text,Ot=r=>r&&r.ownerDocument&&r.ownerDocument.defaultView||null,El=r=>Xe(r)&&r.nodeType===8,Se=r=>Xe(r)&&r.nodeType===1,Xe=r=>{var e=Ot(r);return!!e&&r instanceof e.Node},ot=r=>{var e=r&&r.anchorNode&&Ot(r.anchorNode);return!!e&&r instanceof e.Selection},Ea=r=>Xe(r)&&r.nodeType===3,Al=r=>r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1,Fl=r=>{var[e,t]=r;if(Se(e)&&e.childNodes.length){var n=t===e.childNodes.length,a=n?t-1:t;for([e,a]=Aa(e,a,n?"backward":"forward"),n=a<t;Se(e)&&e.childNodes.length;){var u=n?e.childNodes.length-1:0;e=wl(e,u,n?"backward":"forward")}t=n&&e.textContent!=null?e.textContent.length:0}return[e,t]},bl=r=>{for(var e=r&&r.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Aa=(r,e,t)=>{for(var{childNodes:n}=r,a=n[e],u=e,s=!1,l=!1;(El(a)||Se(a)&&a.childNodes.length===0||Se(a)&&a.getAttribute("contenteditable")==="false")&&!(s&&l);){if(u>=n.length){s=!0,u=e-1,t="backward";continue}if(u<0){l=!0,u=e+1,t="forward";continue}a=n[u],e=u,u+=t==="forward"?1:-1}return[a,e]},wl=(r,e,t)=>{var[n]=Aa(r,e,t);return n},Fa=r=>{var e="";if(Ea(r)&&r.nodeValue)return r.nodeValue;if(Se(r)){for(var t of Array.from(r.childNodes))e+=Fa(t);var n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e},Ol=/data-slate-fragment="(.+?)"/m,yl=r=>{var e=r.getData("text/html"),[,t]=e.match(Ol)||[];return t},Br=r=>r.getSelection!=null?r.getSelection():document.getSelection(),yt=(r,e,t)=>{var{target:n}=e;if(Se(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=E.getWindow(r);if(a.contains(n))return E.hasDOMNode(r,n,{editable:!0});var u=t.find(s=>{var{addedNodes:l,removedNodes:c}=s;for(var f of l)if(f===n||f.contains(n))return!0;for(var v of c)if(v===n||v.contains(n))return!0});return!u||u===e?!1:yt(r,u,t)},xl=()=>{for(var r=document.activeElement;(e=r)!==null&&e!==void 0&&e.shadowRoot&&(t=r.shadowRoot)!==null&&t!==void 0&&t.activeElement;){var e,t,n;r=(n=r)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return r},Sl=0;class Pl{constructor(){Te(this,"id",void 0),this.id="".concat(Sl++)}}var E={androidPendingDiffs:r=>xe.get(r),androidScheduleFlush:r=>{var e;(e=wt.get(r))===null||e===void 0||e()},blur:r=>{var e=E.toDOMNode(r,r),t=E.findDocumentOrShadowRoot(r);Ye.set(r,!1),t.activeElement===e&&e.blur()},deselect:r=>{var{selection:e}=r,t=E.findDocumentOrShadowRoot(r),n=Br(t);n&&n.rangeCount>0&&n.removeAllRanges(),e&&b.deselect(r)},findDocumentOrShadowRoot:r=>{var e=E.toDOMNode(r,r),t=e.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:e.ownerDocument},findEventRange:(r,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:t,clientY:n,target:a}=e;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=E.toSlateNode(r,e.target),s=E.findPath(r,u);if(W.isElement(u)&&i.isVoid(r,u)){var l=a.getBoundingClientRect(),c=r.isInline(u)?t-l.left<l.left+l.width-t:n-l.top<l.top+l.height-n,f=i.point(r,s,{edge:c?"start":"end"}),v=c?i.before(r,f):i.after(r,f);if(v){var D=i.range(r,v);return D}}var g,{document:C}=E.getWindow(r);if(C.caretRangeFromPoint)g=C.caretRangeFromPoint(t,n);else{var p=C.caretPositionFromPoint(t,n);p&&(g=C.createRange(),g.setStart(p.offsetNode,p.offset),g.setEnd(p.offsetNode,p.offset))}if(!g)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var h=E.toSlateRange(r,g,{exactMatch:!1,suppressThrow:!1});return h},findKey:(r,e)=>{var t=zr.get(e);return t||(t=new Pl,zr.set(e,t)),t},findPath:(r,e)=>{for(var t=[],n=e;;){var a=bt.get(n);if(a==null){if(i.isEditor(n))return t;break}var u=Ft.get(n);if(u==null)break;t.unshift(u),n=a}throw new Error("Unable to find the path for Slate node: ".concat(pe.stringify(e)))},focus:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Ye.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{E.focus(e,{retries:t.retries-1})},10);return}var n=E.toDOMNode(e,e),a=E.findDocumentOrShadowRoot(e);if(a.activeElement!==n){if(e.selection&&a instanceof Document){var u=Br(a),s=E.toDOMRange(e,e.selection);u==null||u.removeAllRanges(),u==null||u.addRange(s)}e.selection||b.select(e,i.start(e,[])),Ye.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:r=>{var e=Ca.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=n,u=E.toDOMNode(e,e),s;try{s=Se(t)?t:t.parentElement}catch(l){if(l instanceof Error&&!l.message.includes('Permission denied to access property "nodeType"'))throw l}return s?s.closest("[data-slate-editor]")===u&&(!a||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===u||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(r,e)=>Xe(e)&&E.hasDOMNode(r,e,{editable:!0}),hasRange:(r,e)=>{var{anchor:t,focus:n}=e;return i.hasPath(r,t.path)&&i.hasPath(r,n.path)},hasSelectableTarget:(r,e)=>E.hasEditableTarget(r,e)||E.isTargetInsideNonReadonlyVoid(r,e),hasTarget:(r,e)=>Xe(e)&&E.hasDOMNode(r,e),insertData:(r,e)=>{r.insertData(e)},insertFragmentData:(r,e)=>r.insertFragmentData(e),insertTextData:(r,e)=>r.insertTextData(e),isComposing:r=>!!er.get(r),isFocused:r=>!!Ye.get(r),isReadOnly:r=>!!st.get(r),isTargetInsideNonReadonlyVoid:(r,e)=>{if(st.get(r))return!1;var t=E.hasTarget(r,e)&&E.toSlateNode(r,e);return W.isElement(t)&&i.isVoid(r,t)},setFragmentData:(r,e,t)=>r.setFragmentData(e,t),toDOMNode:(r,e)=>{var t=Vr.get(r),n=i.isEditor(e)?kr.get(r):t==null?void 0:t.get(E.findKey(r,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(pe.stringify(e)));return n},toDOMPoint:(r,e)=>{var[t]=i.node(r,e.path),n=E.toDOMNode(r,t),a;i.void(r,{at:e})&&(e={path:e.path,offset:0});for(var u="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(u)),l=0,c=0;c<s.length;c++){var f=s[c],v=f.childNodes[0];if(!(v==null||v.textContent==null)){var{length:D}=v.textContent,g=f.getAttribute("data-slate-length"),C=g==null?D:parseInt(g,10),p=l+C,h=s[c+1];if(e.offset===p&&h!==null&&h!==void 0&&h.hasAttribute("data-slate-mark-placeholder")){var o,A=h.childNodes[0];a=[A instanceof Bl?A:h,(o=h.textContent)!==null&&o!==void 0&&o.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var F=Math.min(D,Math.max(0,e.offset-l));a=[v,F];break}l=p}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(pe.stringify(e)));return a},toDOMRange:(r,e)=>{var{anchor:t,focus:n}=e,a=B.isBackward(e),u=E.toDOMPoint(r,t),s=B.isCollapsed(e)?u:E.toDOMPoint(r,n),l=E.getWindow(r),c=l.document.createRange(),[f,v]=a?s:u,[D,g]=a?u:s,C=Se(f)?f:f.parentElement,p=!!C.getAttribute("data-slate-zero-width"),h=Se(D)?D:D.parentElement,o=!!h.getAttribute("data-slate-zero-width");return c.setStart(f,p?1:v),c.setEnd(D,o?1:g),c},toSlateNode:(r,e)=>{var t=Se(e)?e:e.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?br.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},toSlatePoint:(r,e,t)=>{var{exactMatch:n,suppressThrow:a}=t,[u,s]=n?e:Fl(e),l=u.parentNode,c=null,f=0;if(l){var v,D,g=E.toDOMNode(r,r),C=l.closest('[data-slate-void="true"]'),p=C&&g.contains(C)?C:null,h=l.closest("[data-slate-leaf]"),o=null;if(h){if(c=h.closest('[data-slate-node="text"]'),c){var A=E.getWindow(r),F=A.document.createRange();F.setStart(c,0),F.setEnd(u,s);var w=F.cloneContents(),x=[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))];x.forEach(y=>{if(we&&!n&&y.hasAttribute("data-slate-zero-width")&&y.textContent.length>0&&y.textContext!=="\uFEFF"){y.textContent.startsWith("\uFEFF")&&(y.textContent=y.textContent.slice(1));return}y.parentNode.removeChild(y)}),f=w.textContent.length,o=c}}else if(p){for(var I=p.querySelectorAll("[data-slate-leaf]"),k=0;k<I.length;k++){var j=I[k];if(E.hasDOMNode(r,j)){h=j;break}}h?(c=h.closest('[data-slate-node="text"]'),o=h,f=o.textContent.length,o.querySelectorAll("[data-slate-zero-width]").forEach(y=>{f-=y.textContent.length})):f=1}o&&f===o.textContent.length&&we&&o.getAttribute("data-slate-zero-width")==="z"&&(v=o.textContent)!==null&&v!==void 0&&v.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||ir&&(D=o.textContent)!==null&&D!==void 0&&D.endsWith(`

`))&&f--}if(we&&!c&&!n){var q=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(q&&E.hasDOMNode(r,q,{editable:!0})){var K=E.toSlateNode(r,q),{path:H,offset:$}=i.start(r,E.findPath(r,K));return q.querySelector("[data-slate-leaf]")||($=s),{path:H,offset:$}}}if(!c){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var O=E.toSlateNode(r,c),L=E.findPath(r,O);return{path:L,offset:f}},toSlateRange:(r,e,t)=>{var n,{exactMatch:a,suppressThrow:u}=t,s=ot(e)?e.anchorNode:e.startContainer,l,c,f,v,D;if(s)if(ot(e)){if(ir&&e.rangeCount>1){f=e.focusNode;var g=e.getRangeAt(0),C=e.getRangeAt(e.rangeCount-1);if(f instanceof HTMLTableRowElement&&g.startContainer instanceof HTMLTableRowElement&&C.startContainer instanceof HTMLTableRowElement){let k=function(j){return j.childElementCount>0?k(j.children[0]):j};var p=g.startContainer,h=C.startContainer,o=k(p.children[g.startOffset]),A=k(h.children[C.startOffset]);v=0,A.childNodes.length>0?l=A.childNodes[0]:l=A,o.childNodes.length>0?f=o.childNodes[0]:f=o,A instanceof HTMLElement?c=A.innerHTML.length:c=0}else g.startContainer===f?(l=C.endContainer,c=C.endOffset,v=g.startOffset):(l=g.startContainer,c=g.endOffset,v=C.startOffset)}else l=e.anchorNode,c=e.anchorOffset,f=e.focusNode,v=e.focusOffset;ma&&bl(l)||ir?D=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:D=e.isCollapsed}else l=e.startContainer,c=e.startOffset,f=e.endContainer,v=e.endOffset,D=e.collapsed;if(l==null||f==null||c==null||v==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if(ir&&(n=f.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&v===f.textContent.length&&v--,"getAttribute"in f&&f.getAttribute("contenteditable")==="false"&&f.getAttribute("data-slate-void")!=="true"){var F;f=l,v=((F=l.textContent)===null||F===void 0?void 0:F.length)||0}var w=E.toSlatePoint(r,[l,c],{exactMatch:a,suppressThrow:u});if(!w)return null;var x=D?w:E.toSlatePoint(r,[f,v],{exactMatch:a,suppressThrow:u});if(!x)return null;var I={anchor:w,focus:x};return B.isExpanded(I)&&B.isForward(I)&&Se(f)&&i.void(r,{at:I.focus,mode:"highest"})&&(I=i.unhangRange(r,I,{voids:!0})),I}};function Tl(r,e){var{path:t,diff:n}=e;if(!i.hasPath(r,t))return!1;var a=S.get(r,t);if(!z.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var u=d.next(t);if(!i.hasPath(r,u))return!1;var s=S.get(r,u);return z.isText(s)&&s.text.startsWith(n.text)}function ba(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.reduce((a,u)=>a.slice(0,u.start)+u.text+a.slice(u.end),r)}function jl(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++)if(r.charAt(n)!==e.charAt(n))return n;return t}function Rl(r,e,t){for(var n=Math.min(r.length,e.length,t),a=0;a<n;a++)if(r.charAt(r.length-a-1)!==e.charAt(e.length-a-1))return a;return n}function wa(r,e){var{start:t,end:n,text:a}=e,u=r.slice(t,n),s=jl(u,a),l=Math.min(u.length-s,a.length-s),c=Rl(u,a,l),f={start:t+s,end:n-c,text:a.slice(s,a.length-c)};return f.start===f.end&&f.text.length===0?null:f}function Nl(r,e,t){var n=Math.min(e.start,t.start),a=Math.max(0,Math.min(e.start+e.text.length,t.end)-t.start),u=ba(r,e,t),s=Math.max(t.start+t.text.length,e.start+e.text.length+(e.start+e.text.length>t.start?t.text.length:0)-a),l=u.slice(n,s),c=Math.max(e.end,t.end-e.text.length+(e.end-e.start));return wa(r,{start:n,end:c,text:l})}function Ml(r){var{path:e,diff:t}=r;return{anchor:{path:e,offset:t.start},focus:{path:e,offset:t.end}}}function lt(r,e){var{path:t,offset:n}=e;if(!i.hasPath(r,t))return null;var a=S.get(r,t);if(!z.isText(a))return null;var u=i.above(r,{match:l=>W.isElement(l)&&i.isBlock(r,l),at:t});if(!u)return null;for(;n>a.text.length;){var s=i.next(r,{at:t,match:z.isText});if(!s||!d.isDescendant(s[1],u[1]))return null;n-=a.text.length,a=s[0],t=s[1]}return{path:t,offset:n}}function jn(r,e){var t=lt(r,e.anchor);if(!t)return null;if(B.isCollapsed(e))return{anchor:t,focus:t};var n=lt(r,e.focus);return n?{anchor:t,focus:n}:null}function ft(r,e,t){var n=xe.get(r),a=n==null?void 0:n.find(v=>{var{path:D}=v;return d.equals(D,e.path)});if(!a||e.offset<=a.diff.start)return Q.transform(e,t,{affinity:"backward"});var{diff:u}=a;if(e.offset<=u.start+u.text.length){var s={path:e.path,offset:u.start},l=Q.transform(s,t,{affinity:"backward"});return l?{path:l.path,offset:l.offset+e.offset-u.start}:null}var c={path:e.path,offset:e.offset-u.text.length+u.end-u.start},f=Q.transform(c,t,{affinity:"backward"});return f?t.type==="split_node"&&d.equals(t.path,e.path)&&c.offset<t.position&&u.start<t.position?f:{path:f.path,offset:f.offset+u.text.length-u.end+u.start}:null}function Rn(r,e,t){var n=ft(r,e.anchor,t);if(!n)return null;if(B.isCollapsed(e))return{anchor:n,focus:n};var a=ft(r,e.focus,t);return a?{anchor:n,focus:a}:null}function Il(r,e){var{path:t,diff:n,id:a}=r;switch(e.type){case"insert_text":return!d.equals(e.path,t)||e.offset>=n.end?r:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:a,path:t};case"remove_text":return!d.equals(e.path,t)||e.offset>=n.end?r:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:a,path:t};case"split_node":return!d.equals(e.path,t)||e.position>=n.end?{diff:n,id:a,path:d.transform(t,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:a,path:t}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:a,path:d.transform(t,e,{affinity:"forward"})};case"merge_node":return d.equals(e.path,t)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:a,path:d.transform(t,e)}:{diff:n,id:a,path:d.transform(t,e)}}var u=d.transform(t,e);return u?{diff:n,path:u,id:a}:null}function Nn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Rr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var kl=25,Ll=200,$l=function(){},zl=r=>(r==null?void 0:r.constructor.name)==="DataTransfer";function Wl(r){var{editor:e,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:n}=r,a=!1,u=null,s=null,l=null,c=0,f=!1,v=()=>{var O=Ue.get(e);if(Ue.delete(e),O){var{selection:L}=e,y=jn(e,O);y&&(!L||!B.equals(y,L))&&b.select(e,y)}},D=()=>{var O=Ke.get(e);if(Ke.delete(e),!!O){if(O.at){var L=Q.isPoint(O.at)?lt(e,O.at):jn(e,O.at);if(!L)return;var y=i.range(e,L);(!e.selection||!B.equals(e.selection,y))&&b.select(e,L)}O.run()}},g=()=>{if(s&&(clearTimeout(s),s=null),l&&(clearTimeout(l),l=null),!x()&&!w()){v();return}a||(a=!0,setTimeout(()=>a=!1)),w()&&(a="action");var O=e.selection&&i.rangeRef(e,e.selection,{affinity:"forward"});We.set(e,e.marks),$l("flush",Ke.get(e),xe.get(e));for(var L=x(),y;y=(N=xe.get(e))===null||N===void 0?void 0:N[0];){var N,re,V=Ne.get(e);V!==void 0&&(Ne.delete(e),e.marks=V),V&&f===!1&&(f=null);var ae=Ml(y);(!e.selection||!B.equals(e.selection,ae))&&b.select(e,ae),y.diff.text?i.insertText(e,y.diff.text):i.deleteFragment(e),xe.set(e,(re=xe.get(e))===null||re===void 0?void 0:re.filter(oe=>{var{id:se}=oe;return se!==y.id})),Tl(e,y)||(L=!1,Ke.delete(e),We.delete(e),a="action",Ue.delete(e),t.cancel(),n.cancel(),O==null||O.unref())}var _=O==null?void 0:O.unref();if(_&&!Ue.get(e)&&(!e.selection||!B.equals(_,e.selection))&&b.select(e,_),w()){D();return}L&&t(),t.flush(),n.flush(),v();var te=We.get(e);We.delete(e),te!==void 0&&(e.marks=te,e.onChange())},C=O=>{u&&clearTimeout(u),u=setTimeout(()=>{er.set(e,!1),g()},kl)},p=O=>{er.set(e,!0),u&&(clearTimeout(u),u=null)},h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,y=ut.get(e);if(y){if(x()||L){y.style.display="none";return}y.style.removeProperty("display")}},o=(O,L)=>{var y,N=(y=xe.get(e))!==null&&y!==void 0?y:[];xe.set(e,N);var re=S.leaf(e,O),V=N.findIndex(te=>d.equals(te.path,O));if(V<0){var ae=wa(re.text,L);ae&&N.push({path:O,diff:L,id:c++}),h();return}var _=Nl(re.text,N[V].diff,L);if(!_){N.splice(V,1),h();return}N[V]=Rr(Rr({},N[V]),{},{diff:_})},A=function(L){var{at:y}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f=!1,Ue.delete(e),t.cancel(),n.cancel(),w()&&g(),Ke.set(e,{at:y,run:L}),l=setTimeout(g)},F=O=>{var L;s&&(clearTimeout(s),s=null);var{inputType:y}=O,N=null,re=O.dataTransfer||O.data||void 0;f!==!1&&y!=="insertText"&&y!=="insertCompositionText"&&(f=!1);var[V]=O.getTargetRanges();V&&(N=E.toSlateRange(e,V,{exactMatch:!1,suppressThrow:!0}));var ae=E.getWindow(e),_=ae.getSelection();if(!N&&_&&(V=_,N=E.toSlateRange(e,_,{exactMatch:!1,suppressThrow:!0})),N=(L=N)!==null&&L!==void 0?L:e.selection,!!N){var te=!0;if(y.startsWith("delete")){if(B.isExpanded(N)){var[oe,se]=B.edges(N),Ce=S.leaf(e,oe.path);if(Ce.text.length===oe.offset&&se.offset===0){var Be=i.next(e,{at:oe.path,match:z.isText});Be&&d.equals(Be[1],se.path)&&(N={anchor:se,focus:se})}}var X=y.endsWith("Backward")?"backward":"forward",[m,M]=B.edges(N),[T,R]=i.leaf(e,m.path),ee={text:"",start:m.offset,end:M.offset},U=xe.get(e),ce=U==null?void 0:U.find(ye=>d.equals(ye.path,R)),ne=ce?[ce.diff,ee]:[ee],J=ba(T.text,...ne);if(J.length===0&&(te=!1),B.isExpanded(N)){if(te&&d.equals(N.anchor.path,N.focus.path)){var ie={path:N.anchor.path,offset:m.offset},ve=i.range(e,ie,ie);return j(ve),o(N.anchor.path,{text:"",end:M.offset,start:m.offset})}return A(()=>i.deleteFragment(e,{direction:X}),{at:N})}}switch(y){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>i.deleteFragment(e),{at:N});case"deleteContent":case"deleteContentForward":{var{anchor:me}=N;if(te&&B.isCollapsed(N)){var le=S.leaf(e,me.path);if(me.offset<le.text.length)return o(me.path,{text:"",start:me.offset,end:me.offset+1})}return A(()=>i.deleteForward(e),{at:N})}case"deleteContentBackward":{var Ae,{anchor:Fe}=N,Me=ot(V)?V.isCollapsed:!!((Ae=V)!==null&&Ae!==void 0&&Ae.collapsed);return te&&Me&&B.isCollapsed(N)&&Fe.offset>0?o(Fe.path,{text:"",start:Fe.offset-1,end:Fe.offset}):A(()=>i.deleteBackward(e),{at:N})}case"deleteEntireSoftLine":return A(()=>{i.deleteBackward(e,{unit:"line"}),i.deleteForward(e,{unit:"line"})},{at:N});case"deleteHardLineBackward":return A(()=>i.deleteBackward(e,{unit:"block"}),{at:N});case"deleteSoftLineBackward":return A(()=>i.deleteBackward(e,{unit:"line"}),{at:N});case"deleteHardLineForward":return A(()=>i.deleteForward(e,{unit:"block"}),{at:N});case"deleteSoftLineForward":return A(()=>i.deleteForward(e,{unit:"line"}),{at:N});case"deleteWordBackward":return A(()=>i.deleteBackward(e,{unit:"word"}),{at:N});case"deleteWordForward":return A(()=>i.deleteForward(e,{unit:"word"}),{at:N});case"insertLineBreak":return A(()=>i.insertSoftBreak(e),{at:N});case"insertParagraph":return A(()=>i.insertBreak(e),{at:N});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(zl(re))return A(()=>E.insertData(e,re),{at:N});var fe=re??"";if(Ne.get(e)&&(fe=fe.replace("\uFEFF","")),y==="insertText"&&/.*\n.*\n$/.test(fe)&&(fe=fe.slice(0,-1)),fe.includes(`
`))return A(()=>{var ye=fe.split(`
`);ye.forEach((Ie,Qe)=>{Ie&&i.insertText(e,Ie),Qe!==ye.length-1&&i.insertSoftBreak(e)})},{at:N});if(d.equals(N.anchor.path,N.focus.path)){var[je,Re]=B.edges(N),ue={start:je.offset,end:Re.offset,text:fe};if(fe&&f&&y==="insertCompositionText"){var de=f.start+f.text.search(/\S|$/),Ze=ue.start+ue.text.search(/\S|$/);Ze===de+1&&ue.end===f.start+f.text.length?(ue.start-=1,f=null,H()):f=!1}else y==="insertText"?f===null?f=ue:f&&B.isCollapsed(N)&&f.end+f.text.length===je.offset?f=Rr(Rr({},f),{},{text:f.text+fe}):f=!1:f=!1;if(te){o(je.path,ue);return}}return A(()=>i.insertText(e,fe),{at:N})}}}},w=()=>!!Ke.get(e),x=()=>{var O;return!!((O=xe.get(e))!==null&&O!==void 0&&O.length)},I=()=>w()||x(),k=()=>a,j=O=>{Ue.set(e,O),s&&(clearTimeout(s),s=null);var{selection:L}=e;if(O){var y=!L||!d.equals(L.anchor.path,O.anchor.path),N=!L||!d.equals(L.anchor.path.slice(0,-1),O.anchor.path.slice(0,-1));(y&&f||N)&&(f=!1),(y||x())&&(s=setTimeout(g,Ll))}},q=()=>{(w()||!x())&&g()},K=O=>{x()||(h(!0),setTimeout(h))},H=()=>{w()||(l=setTimeout(g))},$=O=>{if(!(x()||w())&&O.some(y=>yt(e,y,O))){var L;(L=pa.get(e))===null||L===void 0||L()}};return{flush:g,scheduleFlush:H,hasPendingDiffs:x,hasPendingAction:w,hasPendingChanges:I,isFlushing:k,handleUserSelect:j,handleCompositionEnd:C,handleCompositionStart:p,handleDOMBeforeInput:F,handleKeyDown:K,handleDomMutations:$,handleInput:q}}function Hl(){var r=P.useRef(!1);return P.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),r.current}var wr=Ir?P.useLayoutEffect:P.useEffect;function ql(r,e,t){var[n]=P.useState(()=>new MutationObserver(e));wr(()=>{n.takeRecords()}),P.useEffect(()=>{if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(r.current,t),()=>n.disconnect()},[n,r,t])}var Vl=["node"];function Mn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Kl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ul={subtree:!0,childList:!0,characterData:!0},Gl=we?r=>{var{node:e}=r,t=cr(r,Vl);if(!we)return null;var n=Je(),a=Hl(),[u]=P.useState(()=>Wl(Kl({editor:n},t)));return ql(e,u.handleDomMutations,Ul),wt.set(n,u.scheduleFlush),a&&u.flush(),u}:()=>null,Yl=["anchor","focus"],Xl=["anchor","focus"],Jl=(r,e)=>Object.keys(r).length===Object.keys(e).length&&Object.keys(r).every(t=>e.hasOwnProperty(t)&&r[t]===e[t]),Oa=(r,e)=>{var t=cr(r,Yl),n=cr(e,Xl);return r[vr]===e[vr]&&Jl(t,n)},Zl=(r,e)=>{if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],a=e[t];if(!B.equals(n,a)||!Oa(n,a))return!1}return!0},Ql=(r,e)=>{if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],a=e[t];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!Oa(n,a))return!1}return!0};function In(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _l(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?In(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):In(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ef=r=>{var{isLast:e,leaf:t,parent:n,text:a}=r,u=Je(),s=E.findPath(u,a),l=d.parent(s),c=!!t[Ba];return u.isVoid(n)?Z.createElement(rt,{length:S.string(n).length}):t.text===""&&n.children[n.children.length-1]===a&&!u.isInline(n)&&i.string(u,l)===""?Z.createElement(rt,{isLineBreak:!0,isMarkPlaceholder:c}):t.text===""?Z.createElement(rt,{isMarkPlaceholder:c}):e&&t.text.slice(-1)===`
`?Z.createElement(kn,{isTrailing:!0,text:t.text}):Z.createElement(kn,{text:t.text})},kn=r=>{var{text:e,isTrailing:t=!1}=r,n=P.useRef(null),a=()=>"".concat(e??"").concat(t?`
`:""),[u]=P.useState(a);return wr(()=>{var s=a();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),Z.createElement(rf,{ref:n},u)},rf=P.memo(P.forwardRef((r,e)=>Z.createElement("span",{"data-slate-string":!0,ref:e},r.children))),rt=r=>{var{length:e=0,isLineBreak:t=!1,isMarkPlaceholder:n=!1}=r,a={"data-slate-zero-width":t?"n":"z","data-slate-length":e};return n&&(a["data-slate-mark-placeholder"]=!0),Z.createElement("span",_l({},a),!(we||ha)||!t?"\uFEFF":null,t?Z.createElement("br",null):null)};function Ln(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ya(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var tf=we?300:0;function nf(r,e){r.current&&(r.current.disconnect(),e&&(r.current=null))}function $n(r){r.current&&(clearTimeout(r.current),r.current=null)}var af=r=>{var{leaf:e,isLast:t,text:n,parent:a,renderPlaceholder:u,renderLeaf:s=F=>Z.createElement(sf,ya({},F))}=r,l=Je(),c=P.useRef(null),f=P.useRef(null),[v,D]=P.useState(!1),g=P.useRef(null),C=P.useCallback(F=>{if(nf(c,F==null),F==null){var w;ut.delete(l),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(ut.set(l,F),!c.current){var x=window.ResizeObserver||il;c.current=new x(()=>{var I;(I=e.onPlaceholderResize)===null||I===void 0||I.call(e,F)})}c.current.observe(F),f.current=F}},[f,e,l]),p=Z.createElement(ef,{isLast:t,leaf:e,parent:a,text:n}),h=!!e[vr];if(P.useEffect(()=>(h?g.current||(g.current=setTimeout(()=>{D(!0),g.current=null},tf)):($n(g),D(!1)),()=>$n(g)),[h,D]),h&&v){var o={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:_e?"inherit":void 0},contentEditable:!1,ref:C}};p=Z.createElement(Z.Fragment,null,u(o),p)}var A={"data-slate-leaf":!0};return s({attributes:A,children:p,leaf:e,text:n})},uf=Z.memo(af,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&z.equals(e.leaf,r.leaf)&&e.leaf[vr]===r.leaf[vr]),sf=r=>{var{attributes:e,children:t}=r;return Z.createElement("span",ya({},e),t)},of=r=>{for(var{decorations:e,isLast:t,parent:n,renderPlaceholder:a,renderLeaf:u,text:s}=r,l=Je(),c=P.useRef(null),f=z.decorations(s,e),v=E.findKey(l,s),D=[],g=0;g<f.length;g++){var C=f[g];D.push(Z.createElement(uf,{isLast:t&&g===f.length-1,key:"".concat(v.id,"-").concat(g),renderPlaceholder:a,leaf:C,text:s,parent:n,renderLeaf:u}))}var p=P.useCallback(h=>{var o=Vr.get(l);h?(o==null||o.set(v,h),nr.set(s,h),br.set(h,s)):(o==null||o.delete(v),nr.delete(s),c.current&&br.delete(c.current)),c.current=h},[c,l,v,s]);return Z.createElement("span",{"data-slate-node":"text",ref:p},D)},xa=Z.memo(of,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&Ql(e.decorations,r.decorations));function zn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ct(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var lf=r=>{var{decorations:e,element:t,renderElement:n=F=>Z.createElement(cf,ct({},F)),renderPlaceholder:a,renderLeaf:u,selection:s}=r,l=Je(),c=Df(),f=l.isInline(t),v=E.findKey(l,t),D=P.useCallback(F=>{var w=Vr.get(l);F?(w==null||w.set(v,F),nr.set(t,F),br.set(F,t)):(w==null||w.delete(v),nr.delete(t))},[l,v,t]),g=Pa({decorations:e,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:s}),C={"data-slate-node":"element",ref:D};if(f&&(C["data-slate-inline"]=!0),!f&&i.hasInlines(l,t)){var p=S.string(t),h=ea(p);h==="rtl"&&(C.dir=h)}if(i.isVoid(l,t)){C["data-slate-void"]=!0,!c&&f&&(C.contentEditable=!1);var o=f?"span":"div",[[A]]=S.texts(t);g=Z.createElement(o,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Z.createElement(xa,{renderPlaceholder:a,decorations:[],isLast:!1,parent:t,text:A})),Ft.set(A,0),bt.set(A,t)}return n({attributes:C,children:g,element:t})},ff=Z.memo(lf,(r,e)=>r.element===e.element&&r.renderElement===e.renderElement&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&Zl(r.decorations,e.decorations)&&(r.selection===e.selection||!!r.selection&&!!e.selection&&B.equals(r.selection,e.selection))),cf=r=>{var{attributes:e,children:t,element:n}=r,a=Je(),u=a.isInline(n)?"span":"div";return Z.createElement(u,ct(ct({},e),{},{style:{position:"relative"}}),t)},Sa=P.createContext(()=>[]),vf=()=>P.useContext(Sa),df=P.createContext(!1),Pa=r=>{for(var{decorations:e,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:s}=r,l=vf(),c=Je(),f=E.findPath(c,t),v=[],D=W.isElement(t)&&!c.isInline(t)&&i.hasInlines(c,t),g=0;g<t.children.length;g++){var C=f.concat(g),p=t.children[g],h=E.findKey(c,p),o=i.range(c,C),A=s&&B.intersection(o,s),F=l([p,C]);for(var w of e){var x=B.intersection(w,o);x&&F.push(x)}W.isElement(p)?v.push(Z.createElement(df.Provider,{key:"provider-".concat(h.id),value:!!A},Z.createElement(ff,{decorations:F,element:p,key:h.id,renderElement:n,renderPlaceholder:a,renderLeaf:u,selection:A}))):v.push(Z.createElement(xa,{decorations:F,key:h.id,isLast:D&&g===t.children.length-1,parent:t,renderPlaceholder:a,renderLeaf:u,text:p})),Ft.set(p,g),bt.set(p,t)}return v},Ta=P.createContext(!1),Df=()=>P.useContext(Ta),ja=P.createContext(null),Kr=()=>{var r=P.useContext(ja);if(!r)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=r;return e};function gf(){var r=Je(),e=P.useRef(!1),t=P.useRef(0),n=P.useCallback(()=>{if(!e.current){e.current=!0;var a=E.getWindow(r);a.cancelAnimationFrame(t.current),t.current=a.requestAnimationFrame(()=>{e.current=!1})}},[r]);return P.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:e,onUserInput:n}}var hf=3,mf={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Cf={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},pf={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ge=r=>{var e=mf[r],t=Cf[r],n=pf[r],a=e&&Qr(e),u=t&&Qr(t),s=n&&Qr(n);return l=>!!(a&&a(l)||Tn&&u&&u(l)||!Tn&&s&&s(l))},he={isBold:ge("bold"),isCompose:ge("compose"),isMoveBackward:ge("moveBackward"),isMoveForward:ge("moveForward"),isDeleteBackward:ge("deleteBackward"),isDeleteForward:ge("deleteForward"),isDeleteLineBackward:ge("deleteLineBackward"),isDeleteLineForward:ge("deleteLineForward"),isDeleteWordBackward:ge("deleteWordBackward"),isDeleteWordForward:ge("deleteWordForward"),isExtendBackward:ge("extendBackward"),isExtendForward:ge("extendForward"),isExtendLineBackward:ge("extendLineBackward"),isExtendLineForward:ge("extendLineForward"),isItalic:ge("italic"),isMoveLineBackward:ge("moveLineBackward"),isMoveLineForward:ge("moveLineForward"),isMoveWordBackward:ge("moveWordBackward"),isMoveWordForward:ge("moveWordForward"),isRedo:ge("redo"),isSoftBreak:ge("insertSoftBreak"),isSplitBlock:ge("splitBlock"),isTransposeCharacter:ge("transposeCharacter"),isUndo:ge("undo")},Bf=(r,e)=>{var t=[],n=()=>{t=[]},a=s=>{if(e.current){var l=s.filter(c=>yt(r,c,s));t.push(...l)}};function u(){t.length>0&&(t.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(l=>{s.target.insertBefore(l,s.nextSibling)}),s.addedNodes.forEach(l=>{s.target.removeChild(l)}))}),n())}return{registerMutations:a,restoreDOM:u,clear:n}},Ef={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Ra extends P.Component{constructor(){super(...arguments),Te(this,"context",null),Te(this,"manager",null),Te(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(t.current,Ef)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=Bf(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,n,a=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(a!=null&&a.length){var u;(u=this.manager)===null||u===void 0||u.registerMutations(a)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}Te(Ra,"contextType",At);var Af=we?Ra:r=>{var{children:e}=r;return Z.createElement(Z.Fragment,null,e)},Ff=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],bf=["text"];function Wn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function $e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var wf=r=>Z.createElement(Z.Fragment,null,Pa(r)),Of=P.forwardRef((r,e)=>{var t=P.useCallback(m=>Z.createElement(yf,$e({},m)),[]),{autoFocus:n,decorate:a=xf,onDOMBeforeInput:u,placeholder:s,readOnly:l=!1,renderElement:c,renderLeaf:f,renderPlaceholder:v=t,scrollSelectionIntoView:D=Sf,style:g={},as:C="div",disableDefaultStyles:p=!1}=r,h=cr(r,Ff),o=Kr(),[A,F]=P.useState(!1),w=P.useRef(null),x=P.useRef([]),[I,k]=P.useState(),j=P.useRef(!1),{onUserInput:q,receivedUserInput:K}=gf(),[,H]=P.useReducer(m=>m+1,0);pa.set(o,H),st.set(o,l);var $=P.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);P.useEffect(()=>{w.current&&n&&w.current.focus()},[n]);var O=P.useRef(),L=P.useMemo(()=>ko(()=>{var m=E.toDOMNode(o,o),M=m.getRootNode();if(!j.current&&_e&&M instanceof ShadowRoot){j.current=!0;var T=xl();T?document.execCommand("indent"):b.deselect(o),j.current=!1;return}var R=O.current;if((we||!E.isComposing(o))&&(!$.isUpdatingSelection||R!=null&&R.isFlushing())&&!$.isDraggingInternally){var ee=E.findDocumentOrShadowRoot(o),{activeElement:U}=ee,ce=E.toDOMNode(o,o),ne=Br(ee);if(U===ce?($.latestElement=U,Ye.set(o,!0)):Ye.delete(o),!ne)return b.deselect(o);var{anchorNode:J,focusNode:ie}=ne,ve=E.hasEditableTarget(o,J)||E.isTargetInsideNonReadonlyVoid(o,J),me=E.hasEditableTarget(o,ie)||E.isTargetInsideNonReadonlyVoid(o,ie);if(ve&&me){var le=E.toSlateRange(o,ne,{exactMatch:!1,suppressThrow:!0});le&&(!E.isComposing(o)&&!(R!=null&&R.hasPendingChanges())&&!(R!=null&&R.isFlushing())?b.select(o,le):R==null||R.handleUserSelect(le))}l&&(!ve||!me)&&b.deselect(o)}},100),[o,l,$]),y=P.useMemo(()=>To(L,0),[L]);O.current=Gl({node:w,onDOMSelectionChange:L,scheduleOnDOMSelectionChange:y}),wr(()=>{var m,M,T;w.current&&(T=Ot(w.current))?(Ca.set(o,T),kr.set(o,w.current),nr.set(o,w.current),br.set(w.current,o)):nr.delete(o);var{selection:R}=o,ee=E.findDocumentOrShadowRoot(o),U=Br(ee);if(!(!U||!E.isFocused(o)||(m=O.current)!==null&&m!==void 0&&m.hasPendingAction())){var ce=ve=>{var me=U.type!=="None";if(!(!R&&!me)){var le=U.focusNode,Ae;if(ir&&U.rangeCount>1){var Fe=U.getRangeAt(0),Me=U.getRangeAt(U.rangeCount-1);Fe.startContainer===le?Ae=Me.endContainer:Ae=Fe.startContainer}else Ae=U.anchorNode;var fe=kr.get(o),je=!1;if(fe.contains(Ae)&&fe.contains(le)&&(je=!0),me&&je&&R&&!ve){var Re=E.toSlateRange(o,U,{exactMatch:!0,suppressThrow:!0});if(Re&&B.equals(Re,R)){var ue;if(!$.hasMarkPlaceholder||(ue=Ae)!==null&&ue!==void 0&&(ue=ue.parentElement)!==null&&ue!==void 0&&ue.hasAttribute("data-slate-mark-placeholder"))return}}if(R&&!E.hasRange(o,R)){o.selection=E.toSlateRange(o,U,{exactMatch:!1,suppressThrow:!0});return}$.isUpdatingSelection=!0;var de=R&&E.toDOMRange(o,R);return de?(E.isComposing(o)&&!we?U.collapseToEnd():B.isBackward(R)?U.setBaseAndExtent(de.endContainer,de.endOffset,de.startContainer,de.startOffset):U.setBaseAndExtent(de.startContainer,de.startOffset,de.endContainer,de.endOffset),D(o,de)):U.removeAllRanges(),de}};U.rangeCount<=1&&ce();var ne=((M=O.current)===null||M===void 0?void 0:M.isFlushing())==="action";if(!we||!ne){setTimeout(()=>{$.isUpdatingSelection=!1});return}var J=null,ie=requestAnimationFrame(()=>{if(ne){var ve=me=>{try{var le=E.toDOMNode(o,o);le.focus(),ce(me)}catch{}};ve(),J=setTimeout(()=>{ve(!0),$.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(ie),J&&clearTimeout(J)}}});var N=P.useCallback(m=>{var M=E.toDOMNode(o,o),T=M.getRootNode();if(j!=null&&j.current&&_e&&T instanceof ShadowRoot){var R=m.getTargetRanges(),ee=R[0],U=new window.Range;U.setStart(ee.startContainer,ee.startOffset),U.setEnd(ee.endContainer,ee.endOffset);var ce=E.toSlateRange(o,U,{exactMatch:!1,suppressThrow:!1});b.select(o,ce),m.preventDefault(),m.stopImmediatePropagation();return}if(q(),!l&&E.hasEditableTarget(o,m.target)&&!Pf(m,u)){var ne;if(O.current)return O.current.handleDOMBeforeInput(m);y.flush(),L.flush();var{selection:J}=o,{inputType:ie}=m,ve=m.dataTransfer||m.data||void 0,me=ie==="insertCompositionText"||ie==="deleteCompositionText";if(me&&E.isComposing(o))return;var le=!1;if(ie==="insertText"&&J&&B.isCollapsed(J)&&m.data&&m.data.length===1&&/[a-z ]/i.test(m.data)&&J.anchor.offset!==0){var Ae,Fe;le=!0,o.marks&&(le=!1);var{anchor:Me}=J,[fe,je]=E.toDOMPoint(o,Me),Re=(Ae=fe.parentElement)===null||Ae===void 0?void 0:Ae.closest("a"),ue=E.getWindow(o);if(le&&Re&&E.hasDOMNode(o,Re)){var de,Ze=ue==null?void 0:ue.document.createTreeWalker(Re,NodeFilter.SHOW_TEXT).lastChild();Ze===fe&&((de=Ze.textContent)===null||de===void 0?void 0:de.length)===je&&(le=!1)}if(le&&fe.parentElement&&(ue==null||(Fe=ue.getComputedStyle(fe.parentElement))===null||Fe===void 0?void 0:Fe.whiteSpace)==="pre"){var ye=i.above(o,{at:Me.path,match:ar=>W.isElement(ar)&&i.isBlock(o,ar)});ye&&S.string(ye[0]).includes("	")&&(le=!1)}}if(!ie.startsWith("delete")||ie.startsWith("deleteBy")){var[Ie]=m.getTargetRanges();if(Ie){var Qe=E.toSlateRange(o,Ie,{exactMatch:!1,suppressThrow:!1});if(!J||!B.equals(J,Qe)){le=!1;var ke=!me&&o.selection&&i.rangeRef(o,o.selection);b.select(o,Qe),ke&&pr.set(o,ke)}}}if(me)return;if(le||m.preventDefault(),J&&B.isExpanded(J)&&ie.startsWith("delete")){var Ur=ie.endsWith("Backward")?"backward":"forward";i.deleteFragment(o,{direction:Ur});return}switch(ie){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{i.deleteFragment(o);break}case"deleteContent":case"deleteContentForward":{i.deleteForward(o);break}case"deleteContentBackward":{i.deleteBackward(o);break}case"deleteEntireSoftLine":{i.deleteBackward(o,{unit:"line"}),i.deleteForward(o,{unit:"line"});break}case"deleteHardLineBackward":{i.deleteBackward(o,{unit:"block"});break}case"deleteSoftLineBackward":{i.deleteBackward(o,{unit:"line"});break}case"deleteHardLineForward":{i.deleteForward(o,{unit:"block"});break}case"deleteSoftLineForward":{i.deleteForward(o,{unit:"line"});break}case"deleteWordBackward":{i.deleteBackward(o,{unit:"word"});break}case"deleteWordForward":{i.deleteForward(o,{unit:"word"});break}case"insertLineBreak":i.insertSoftBreak(o);break;case"insertParagraph":{i.insertBreak(o);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{ie==="insertFromComposition"&&E.isComposing(o)&&(F(!1),er.set(o,!1)),(ve==null?void 0:ve.constructor.name)==="DataTransfer"?E.insertData(o,ve):typeof ve=="string"&&(le?x.current.push(()=>i.insertText(o,ve)):i.insertText(o,ve));break}}var Dr=(ne=pr.get(o))===null||ne===void 0?void 0:ne.unref();pr.delete(o),Dr&&(!o.selection||!B.equals(o.selection,Dr))&&b.select(o,Dr)}},[o,L,q,u,l,y]),re=P.useCallback(m=>{m==null?(L.cancel(),y.cancel(),kr.delete(o),nr.delete(o),w.current&&Ve&&w.current.removeEventListener("beforeinput",N)):Ve&&m.addEventListener("beforeinput",N),w.current=m,typeof e=="function"?e(m):e&&(e.current=m)},[L,y,o,N,e]);wr(()=>{var m=E.getWindow(o);m.document.addEventListener("selectionchange",y);var M=()=>{$.isDraggingInternally=!1};return m.document.addEventListener("dragend",M),m.document.addEventListener("drop",M),()=>{m.document.removeEventListener("selectionchange",y),m.document.removeEventListener("dragend",M),m.document.removeEventListener("drop",M)}},[y,$]);var V=a([o,[]]),ae=s&&o.children.length===1&&Array.from(S.texts(o)).length===1&&S.string(o)===""&&!A,_=P.useCallback(m=>{if(m&&ae){var M;k((M=m.getBoundingClientRect())===null||M===void 0?void 0:M.height)}else k(void 0)},[ae]);if(ae){var te=i.start(o,[]);V.push({[vr]:!0,placeholder:s,onPlaceholderResize:_,anchor:te,focus:te})}var{marks:oe}=o;if($.hasMarkPlaceholder=!1,o.selection&&B.isCollapsed(o.selection)&&oe){var{anchor:se}=o.selection,Ce=S.leaf(o,se.path),Be=cr(Ce,bf);if(!z.equals(Ce,oe,{loose:!0})){$.hasMarkPlaceholder=!0;var X=Object.fromEntries(Object.keys(Be).map(m=>[m,null]));V.push($e($e($e({[Ba]:!0},X),oe),{},{anchor:se,focus:se}))}}return P.useEffect(()=>{setTimeout(()=>{var{selection:m}=o;if(m){var{anchor:M}=m,T=S.leaf(o,M.path);if(oe&&!z.equals(T,oe,{loose:!0})){Ne.set(o,oe);return}}Ne.delete(o)})}),Z.createElement(Ta.Provider,{value:l},Z.createElement(Sa.Provider,{value:a},Z.createElement(Af,{node:w,receivedUserInput:K},Z.createElement(C,$e($e({role:l?void 0:"textbox","aria-multiline":l?void 0:!0},h),{},{spellCheck:Ve||!Ir?h.spellCheck:!1,autoCorrect:Ve||!Ir?h.autoCorrect:"false",autoCapitalize:Ve||!Ir?h.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l,zindex:-1,suppressContentEditableWarning:!0,ref:re,style:$e($e({},p?{}:$e({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},I?{minHeight:I}:{})),g),onBeforeInput:P.useCallback(m=>{if(!Ve&&!l&&!be(m,h.onBeforeInput)&&E.hasSelectableTarget(o,m.target)&&(m.preventDefault(),!E.isComposing(o))){var M=m.data;i.insertText(o,M)}},[h.onBeforeInput,o,l]),onInput:P.useCallback(m=>{if(!be(m,h.onInput)){if(O.current){O.current.handleInput();return}for(var M of x.current)M();x.current=[]}},[h.onInput]),onBlur:P.useCallback(m=>{if(!(l||$.isUpdatingSelection||!E.hasSelectableTarget(o,m.target)||be(m,h.onBlur))){var M=E.findDocumentOrShadowRoot(o);if($.latestElement!==M.activeElement){var{relatedTarget:T}=m,R=E.toDOMNode(o,o);if(T!==R&&!(Se(T)&&T.hasAttribute("data-slate-spacer"))){if(T!=null&&Xe(T)&&E.hasDOMNode(o,T)){var ee=E.toSlateNode(o,T);if(W.isElement(ee)&&!o.isVoid(ee))return}if(_e){var U=Br(M);U==null||U.removeAllRanges()}Ye.delete(o)}}}},[l,$.isUpdatingSelection,$.latestElement,o,h.onBlur]),onClick:P.useCallback(m=>{if(E.hasTarget(o,m.target)&&!be(m,h.onClick)&&Xe(m.target)){var M=E.toSlateNode(o,m.target),T=E.findPath(o,M);if(!i.hasPath(o,T)||S.get(o,T)!==M)return;if(m.detail===hf&&T.length>=1){var R=T;if(!(W.isElement(M)&&i.isBlock(o,M))){var ee,U=i.above(o,{match:le=>W.isElement(le)&&i.isBlock(o,le),at:T});R=(ee=U==null?void 0:U[1])!==null&&ee!==void 0?ee:T.slice(0,1)}var ce=i.range(o,R);b.select(o,ce);return}if(l)return;var ne=i.start(o,T),J=i.end(o,T),ie=i.void(o,{at:ne}),ve=i.void(o,{at:J});if(ie&&ve&&d.equals(ie[1],ve[1])){var me=i.range(o,ne);b.select(o,me)}}},[o,h.onClick,l]),onCompositionEnd:P.useCallback(m=>{if(E.hasSelectableTarget(o,m.target)){var M;if(E.isComposing(o)&&Promise.resolve().then(()=>{F(!1),er.set(o,!1)}),(M=O.current)===null||M===void 0||M.handleCompositionEnd(m),be(m,h.onCompositionEnd)||we)return;if(!_e&&!ml&&!ha&&!pl&&!Cl&&m.data){var T=Ne.get(o);Ne.delete(o),T!==void 0&&(We.set(o,o.marks),o.marks=T),i.insertText(o,m.data);var R=We.get(o);We.delete(o),R!==void 0&&(o.marks=R)}}},[h.onCompositionEnd,o]),onCompositionUpdate:P.useCallback(m=>{E.hasSelectableTarget(o,m.target)&&!be(m,h.onCompositionUpdate)&&(E.isComposing(o)||(F(!0),er.set(o,!0)))},[h.onCompositionUpdate,o]),onCompositionStart:P.useCallback(m=>{if(E.hasSelectableTarget(o,m.target)){var M;if((M=O.current)===null||M===void 0||M.handleCompositionStart(m),be(m,h.onCompositionStart)||we)return;F(!0);var{selection:T}=o;if(T&&B.isExpanded(T)){i.deleteFragment(o);return}}},[h.onCompositionStart,o]),onCopy:P.useCallback(m=>{E.hasSelectableTarget(o,m.target)&&!be(m,h.onCopy)&&!Hn(m)&&(m.preventDefault(),E.setFragmentData(o,m.clipboardData,"copy"))},[h.onCopy,o]),onCut:P.useCallback(m=>{if(!l&&E.hasSelectableTarget(o,m.target)&&!be(m,h.onCut)&&!Hn(m)){m.preventDefault(),E.setFragmentData(o,m.clipboardData,"cut");var{selection:M}=o;if(M)if(B.isExpanded(M))i.deleteFragment(o);else{var T=S.parent(o,M.anchor.path);i.isVoid(o,T)&&b.delete(o)}}},[l,o,h.onCut]),onDragOver:P.useCallback(m=>{if(E.hasTarget(o,m.target)&&!be(m,h.onDragOver)){var M=E.toSlateNode(o,m.target);W.isElement(M)&&i.isVoid(o,M)&&m.preventDefault()}},[h.onDragOver,o]),onDragStart:P.useCallback(m=>{if(!l&&E.hasTarget(o,m.target)&&!be(m,h.onDragStart)){var M=E.toSlateNode(o,m.target),T=E.findPath(o,M),R=W.isElement(M)&&i.isVoid(o,M)||i.void(o,{at:T,voids:!0});if(R){var ee=i.range(o,T);b.select(o,ee)}$.isDraggingInternally=!0,E.setFragmentData(o,m.dataTransfer,"drag")}},[l,o,h.onDragStart,$]),onDrop:P.useCallback(m=>{if(!l&&E.hasTarget(o,m.target)&&!be(m,h.onDrop)){m.preventDefault();var M=o.selection,T=E.findEventRange(o,m),R=m.dataTransfer;b.select(o,T),$.isDraggingInternally&&M&&!B.equals(M,T)&&!i.void(o,{at:T,voids:!0})&&b.delete(o,{at:M}),E.insertData(o,R),E.isFocused(o)||E.focus(o)}},[l,o,h.onDrop,$]),onDragEnd:P.useCallback(m=>{!l&&$.isDraggingInternally&&h.onDragEnd&&E.hasTarget(o,m.target)&&h.onDragEnd(m)},[l,$,h,o]),onFocus:P.useCallback(m=>{if(!l&&!$.isUpdatingSelection&&E.hasEditableTarget(o,m.target)&&!be(m,h.onFocus)){var M=E.toDOMNode(o,o),T=E.findDocumentOrShadowRoot(o);if($.latestElement=T.activeElement,ir&&m.target!==M){M.focus();return}Ye.set(o,!0)}},[l,$,o,h.onFocus]),onKeyDown:P.useCallback(m=>{if(!l&&E.hasEditableTarget(o,m.target)){var M;(M=O.current)===null||M===void 0||M.handleKeyDown(m);var{nativeEvent:T}=m;if(E.isComposing(o)&&T.isComposing===!1&&(er.set(o,!1),F(!1)),be(m,h.onKeyDown)||E.isComposing(o))return;var{selection:R}=o,ee=o.children[R!==null?R.focus.path[0]:0],U=ea(S.string(ee))==="rtl";if(he.isRedo(T)){m.preventDefault();var ce=o;typeof ce.redo=="function"&&ce.redo();return}if(he.isUndo(T)){m.preventDefault();var ne=o;typeof ne.undo=="function"&&ne.undo();return}if(he.isMoveLineBackward(T)){m.preventDefault(),b.move(o,{unit:"line",reverse:!0});return}if(he.isMoveLineForward(T)){m.preventDefault(),b.move(o,{unit:"line"});return}if(he.isExtendLineBackward(T)){m.preventDefault(),b.move(o,{unit:"line",edge:"focus",reverse:!0});return}if(he.isExtendLineForward(T)){m.preventDefault(),b.move(o,{unit:"line",edge:"focus"});return}if(he.isMoveBackward(T)){m.preventDefault(),R&&B.isCollapsed(R)?b.move(o,{reverse:!U}):b.collapse(o,{edge:U?"end":"start"});return}if(he.isMoveForward(T)){m.preventDefault(),R&&B.isCollapsed(R)?b.move(o,{reverse:U}):b.collapse(o,{edge:U?"start":"end"});return}if(he.isMoveWordBackward(T)){m.preventDefault(),R&&B.isExpanded(R)&&b.collapse(o,{edge:"focus"}),b.move(o,{unit:"word",reverse:!U});return}if(he.isMoveWordForward(T)){m.preventDefault(),R&&B.isExpanded(R)&&b.collapse(o,{edge:"focus"}),b.move(o,{unit:"word",reverse:U});return}if(Ve){if((ma||_e)&&R&&(he.isDeleteBackward(T)||he.isDeleteForward(T))&&B.isCollapsed(R)){var J=S.parent(o,R.anchor.path);if(W.isElement(J)&&i.isVoid(o,J)&&(i.isInline(o,J)||i.isBlock(o,J))){m.preventDefault(),i.deleteBackward(o,{unit:"block"});return}}}else{if(he.isBold(T)||he.isItalic(T)||he.isTransposeCharacter(T)){m.preventDefault();return}if(he.isSoftBreak(T)){m.preventDefault(),i.insertSoftBreak(o);return}if(he.isSplitBlock(T)){m.preventDefault(),i.insertBreak(o);return}if(he.isDeleteBackward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"backward"}):i.deleteBackward(o);return}if(he.isDeleteForward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"forward"}):i.deleteForward(o);return}if(he.isDeleteLineBackward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"backward"}):i.deleteBackward(o,{unit:"line"});return}if(he.isDeleteLineForward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"forward"}):i.deleteForward(o,{unit:"line"});return}if(he.isDeleteWordBackward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"backward"}):i.deleteBackward(o,{unit:"word"});return}if(he.isDeleteWordForward(T)){m.preventDefault(),R&&B.isExpanded(R)?i.deleteFragment(o,{direction:"forward"}):i.deleteForward(o,{unit:"word"});return}}}},[l,o,h.onKeyDown]),onPaste:P.useCallback(m=>{!l&&E.hasEditableTarget(o,m.target)&&!be(m,h.onPaste)&&(!Ve||Al(m.nativeEvent)||_e)&&(m.preventDefault(),E.insertData(o,m.clipboardData))},[l,o,h.onPaste])}),Z.createElement(wf,{decorations:V,node:o,renderElement:c,renderPlaceholder:v,renderLeaf:f,selection:o.selection})))))}),yf=r=>{var{attributes:e,children:t}=r;return Z.createElement("span",$e({},e),t,we&&Z.createElement("br",null))},xf=()=>[],Sf=(r,e)=>{if(e.getBoundingClientRect&&(!r.selection||r.selection&&B.isCollapsed(r.selection))){var t=e.startContainer.parentElement;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),zo(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},be=(r,e)=>{if(!e)return!1;var t=e(r);return t??(r.isDefaultPrevented()||r.isPropagationStopped())},Hn=r=>Xe(r.target)&&(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement),Pf=(r,e)=>{if(!e)return!1;var t=e(r);return t??r.defaultPrevented},Tf=P.createContext(!1),jf=P.createContext({});function Rf(r){var e=P.useRef([]).current,t=P.useRef({editor:r}).current,n=P.useCallback(u=>{t.editor=u,e.forEach(s=>s(u))},[e,t]),a=P.useMemo(()=>({getSlate:()=>t.editor,addEventListener:u=>(e.push(u),()=>{e.splice(e.indexOf(u),1)})}),[e,t]);return{selectorContext:a,onChange:n}}var Nf=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Mf=r=>{var{editor:e,children:t,onChange:n,onSelectionChange:a,onValueChange:u,initialValue:s}=r,l=cr(r,Nf),[c,f]=Z.useState(()=>{if(!S.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(pe.stringify(s)));if(!i.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(pe.stringify(e)));return e.children=s,Object.assign(e,l),{v:0,editor:e}}),{selectorContext:v,onChange:D}=Rf(e),g=P.useCallback(h=>{var o;switch(n&&n(e.children),h==null||(o=h.operation)===null||o===void 0?void 0:o.type){case"set_selection":a==null||a(e.selection);break;default:u==null||u(e.children)}f(A=>({v:A.v+1,editor:e})),D(e)},[e,D,n,a,u]);P.useEffect(()=>(it.set(e,g),()=>{it.set(e,()=>{})}),[e,g]);var[C,p]=P.useState(E.isFocused(e));return P.useEffect(()=>{p(E.isFocused(e))},[e]),wr(()=>{var h=()=>p(E.isFocused(e));return ga>=17?(document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",h)}):(document.addEventListener("focus",h,!0),document.addEventListener("blur",h,!0),()=>{document.removeEventListener("focus",h,!0),document.removeEventListener("blur",h,!0)})},[]),Z.createElement(jf.Provider,{value:v},Z.createElement(ja.Provider,{value:c},Z.createElement(At.Provider,{value:c.editor},Z.createElement(Tf.Provider,{value:C},t))))},qn=(r,e)=>{var t=(e.top+e.bottom)/2;return r.top<=t&&r.bottom>=t},Vn=(r,e,t)=>{var n=E.toDOMRange(r,e).getBoundingClientRect(),a=E.toDOMRange(r,t).getBoundingClientRect();return qn(n,a)&&qn(a,n)},If=(r,e)=>{var t=i.range(r,B.end(e)),n=Array.from(i.positions(r,{at:e})),a=0,u=n.length,s=Math.floor(u/2);if(Vn(r,i.range(r,n[a]),t))return i.range(r,n[a],t);if(n.length<2)return i.range(r,n[n.length-1],t);for(;s!==n.length&&s!==a;)Vn(r,i.range(r,n[s]),t)?u=s:a=s,s=Math.floor((a+u)/2);return i.range(r,n[u],t)};function Kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Un(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var kf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:a,onChange:u,deleteBackward:s,addMark:l,removeMark:c}=n;return Vr.set(n,new WeakMap),n.addMark=(f,v)=>{var D,g;(D=wt.get(n))===null||D===void 0||D(),!Ne.get(n)&&(g=xe.get(n))!==null&&g!==void 0&&g.length&&Ne.set(n,null),We.delete(n),l(f,v)},n.removeMark=f=>{var v;!Ne.get(n)&&(v=xe.get(n))!==null&&v!==void 0&&v.length&&Ne.set(n,null),We.delete(n),c(f)},n.deleteBackward=f=>{if(f!=="line")return s(f);if(n.selection&&B.isCollapsed(n.selection)){var v=i.above(n,{match:p=>W.isElement(p)&&i.isBlock(n,p),at:n.selection});if(v){var[,D]=v,g=i.range(n,D,n.selection.anchor),C=If(n,g);B.isCollapsed(C)||b.delete(n,{at:C})}}},n.apply=f=>{var v=[],D=[],g=xe.get(n);if(g!=null&&g.length){var C=g.map(y=>Il(y,f)).filter(Boolean);xe.set(n,C)}var p=Ue.get(n);p&&Ue.set(n,Rn(n,p,f));var h=Ke.get(n);if(h!=null&&h.at){var o=Q.isPoint(h==null?void 0:h.at)?ft(n,h.at,f):Rn(n,h.at,f);Ke.set(n,o?Un(Un({},h),{},{at:o}):null)}switch(f.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{v.push(...ur(n,f.path));break}case"set_selection":{var A;(A=pr.get(n))===null||A===void 0||A.unref(),pr.delete(n);break}case"insert_node":case"remove_node":{v.push(...ur(n,d.parent(f.path)));break}case"merge_node":{var F=d.previous(f.path);v.push(...ur(n,F));break}case"move_node":{var w=d.common(d.parent(f.path),d.parent(f.newPath));v.push(...ur(n,w));var x;d.isBefore(f.path,f.newPath)?(v.push(...ur(n,d.parent(f.path))),x=f.newPath):(v.push(...ur(n,d.parent(f.newPath))),x=f.path);var I=S.get(e,d.parent(x)),k=E.findKey(n,I),j=i.pathRef(n,d.parent(x));D.push([j,k]);break}}a(f);for(var[q,K]of v){var[H]=i.node(n,q);zr.set(H,K)}for(var[$,O]of D)if($.current){var[L]=i.node(n,$.current);zr.set(L,O)}},n.setFragmentData=f=>{var{selection:v}=n;if(v){var[D,g]=B.edges(v),C=i.void(n,{at:D.path}),p=i.void(n,{at:g.path});if(!(B.isCollapsed(v)&&!C)){var h=E.toDOMRange(n,v),o=h.cloneContents(),A=o.childNodes[0];if(o.childNodes.forEach(H=>{H.textContent&&H.textContent.trim()!==""&&(A=H)}),p){var[F]=p,w=h.cloneRange(),x=E.toDOMNode(n,F);w.setEndAfter(x),o=w.cloneContents()}if(C&&(A=o.querySelector("[data-slate-spacer]")),Array.from(o.querySelectorAll("[data-slate-zero-width]")).forEach(H=>{var $=H.getAttribute("data-slate-zero-width")==="n";H.textContent=$?`
`:""}),Ea(A)){var I=A.ownerDocument.createElement("span");I.style.whiteSpace="pre",I.appendChild(A),o.appendChild(I),A=I}var k=n.getFragment(),j=JSON.stringify(k),q=window.btoa(encodeURIComponent(j));A.setAttribute("data-slate-fragment",q),f.setData("application/".concat(t),q);var K=o.ownerDocument.createElement("div");return K.appendChild(o),K.setAttribute("hidden","true"),o.ownerDocument.body.appendChild(K),f.setData("text/html",K.innerHTML),f.setData("text/plain",Fa(K)),o.ownerDocument.body.removeChild(K),f}}},n.insertData=f=>{n.insertFragmentData(f)||n.insertTextData(f)},n.insertFragmentData=f=>{var v=f.getData("application/".concat(t))||yl(f);if(v){var D=decodeURIComponent(window.atob(v)),g=JSON.parse(D);return n.insertFragment(g),!0}return!1},n.insertTextData=f=>{var v=f.getData("text/plain");if(v){var D=v.split(/\r\n|\r|\n/),g=!1;for(var C of D)g&&b.splitNodes(n,{always:!0}),n.insertText(C),g=!0;return!0}return!1},n.onChange=f=>{var v=ga<18?Ka.unstable_batchedUpdates:D=>D();v(()=>{var D=it.get(n);D&&D(f),u(f)})},n},ur=(r,e)=>{var t=[];for(var[n,a]of i.levels(r,{at:e})){var u=E.findKey(r,n);t.push([a,u])}return t},Lf={isHistory(r){return Ee(r)&&Array.isArray(r.redos)&&Array.isArray(r.undos)&&(r.redos.length===0||Ge.isOperationList(r.redos[0].operations))&&(r.undos.length===0||Ge.isOperationList(r.undos[0].operations))}},tt=new WeakMap,nt=new WeakMap,or={isHistoryEditor(r){return Lf.isHistory(r.history)&&i.isEditor(r)},isMerging(r){return nt.get(r)},isSaving(r){return tt.get(r)},redo(r){r.redo()},undo(r){r.undo()},withoutMerging(r,e){var t=or.isMerging(r);nt.set(r,!1),e(),nt.set(r,t)},withoutSaving(r,e){var t=or.isSaving(r);tt.set(r,!1),e(),tt.set(r,t)}},$f=r=>{var e=r,{apply:t}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:a}=n;if(a.length>0){var u=a[a.length-1];u.selectionBefore&&b.setSelection(e,u.selectionBefore),or.withoutSaving(e,()=>{i.withoutNormalizing(e,()=>{for(var s of u.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",u)}},e.undo=()=>{var{history:n}=e,{undos:a}=n;if(a.length>0){var u=a[a.length-1];or.withoutSaving(e,()=>{i.withoutNormalizing(e,()=>{var s=u.operations.map(Ge.inverse).reverse();for(var l of s)e.apply(l);u.selectionBefore&&b.setSelection(e,u.selectionBefore)})}),e.writeHistory("redos",u),n.undos.pop()}},e.apply=n=>{var{operations:a,history:u}=e,{undos:s}=u,l=s[s.length-1],c=l&&l.operations[l.operations.length-1],f=or.isSaving(e),v=or.isMerging(e);if(f==null&&(f=Wf(n)),f){if(v==null&&(l==null?v=!1:a.length!==0?v=!0:v=zf(n,c)),l&&v)l.operations.push(n);else{var D={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",D)}for(;s.length>100;)s.shift();u.redos=[]}t(n)},e.writeHistory=(n,a)=>{e.history[n].push(a)},e},zf=(r,e)=>!!(e&&r.type==="insert_text"&&e.type==="insert_text"&&r.offset===e.offset+e.text.length&&d.equals(r.path,e.path)||e&&r.type==="remove_text"&&e.type==="remove_text"&&r.offset+r.text.length===e.offset&&d.equals(r.path,e.path)),Wf=(r,e)=>r.type!=="set_selection";const Hf=Hr(G.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42M10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5"}),"FormatBold"),qf=Hr(G.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}),"FormatItalic"),Vf=Hr(G.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6m-7 2v2h14v-2z"}),"FormatUnderlined"),Kf=Hr(G.jsx("path",{d:"M6.85 7.08C6.85 4.37 9.45 3 12.24 3c1.64 0 3 .49 3.9 1.28.77.65 1.46 1.73 1.46 3.24h-3.01c0-.31-.05-.59-.15-.85-.29-.86-1.2-1.28-2.25-1.28-1.86 0-2.34 1.02-2.34 1.7 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.21-.34-.54-.89-.54-1.92M21 12v-2H3v2h9.62c1.15.45 1.96.75 1.96 1.97 0 1-.81 1.67-2.28 1.67-1.54 0-2.93-.54-2.93-2.51H6.4c0 .55.08 1.13.24 1.58.81 2.29 3.29 3.3 5.67 3.3 2.27 0 5.3-.89 5.3-4.05 0-.3-.01-1.16-.48-1.94H21z"}),"StrikethroughS");var xt={},Uf=Dt;Object.defineProperty(xt,"__esModule",{value:!0});var Na=xt.default=void 0,Gf=Uf(dt()),Yf=G;Na=xt.default=(0,Gf.default)((0,Yf.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");var St={},Xf=Dt;Object.defineProperty(St,"__esModule",{value:!0});var Ma=St.default=void 0,Jf=Xf(dt()),Zf=G;Ma=St.default=(0,Jf.default)((0,Zf.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered");var Pt={},Qf=Dt;Object.defineProperty(Pt,"__esModule",{value:!0});var Ia=Pt.default=void 0,_f=Qf(dt()),ec=G;Ia=Pt.default=(0,_f.default)((0,ec.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");const rc=["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga"];var tc=sc,nc=/^(?:\w+:)?\/\/(\S+)$/,ac=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,uc=/^[^\s\.]+\.\S{2,}$/;function sc(r){if(typeof r!="string")return!1;var e=r.match(nc);if(!e)return!1;var t=e[1];return t?!!(ac.test(t)||uc.test(t)):!1}const ic=Wr(tc),oc=[{type:"paragraph",children:[{text:""}]}],Gn=["numbered-list","bulleted-list"],Pe={isMarkActive(r,e){const t=i.marks(r);return t?t[e]===!0:!1},isBlockActive(r,e){const[t]=i.nodes(r,{match:n=>n.type===e});return!!t},isImageUrl(r){if(!r||!ic(r))return!1;const e=new URL(r).pathname.split(".").pop();return rc.includes(e)},checkIfInImage(r){const{selection:e}=r;if(e){const[t]=i.above(r,{match:n=>n.type==="image"})||[null,null];return!t}},toggleMark(r,e){Pe.isMarkActive(r,e)?i.removeMark(r,e):i.addMark(r,e,!0)},toggleBlock(r,e){const t=Pe.isBlockActive(r,e),n=Gn.includes(e);if(b.unwrapNodes(r,{match:a=>Gn.includes(a.type),split:!0}),b.setNodes(r,{type:t?"paragraph":n?"list-item":e},{match:a=>W.isElement(a)&&i.isBlock(r,a)}),!t&&n){const a={type:e,children:[]};b.wrapNodes(r,a)}},insertImage(r,e){const t={type:"image",url:e,children:[{text:""}]},n=Pe.isBlockActive(r,"list-item");console.log(n),n&&b.move(r),b.insertNodes(r,t),b.insertNodes(r,{type:"paragraph",children:[{text:""}]})},fnRemoteImage(r,e){}};function lc(){const r=Kr(),[e,t]=P.useState(!0),[n,a]=P.useState({top:0,left:0}),u=P.useCallback(()=>{var l;const{selection:s}=r;if(s){const f=E.toDOMRange(r,s).getBoundingClientRect(),v=document.querySelector(".content");if(!v)return;const D=v.scrollTop,g=v.scrollLeft,C=((l=document.getElementById("sidebar"))==null?void 0:l.offsetWidth)||0;a({top:f.top+D+20,left:f.left+g-C})}},[r]);return P.useEffect(()=>{const s=()=>a({top:0,left:0}),l=E.toDOMNode(r,r);return l.addEventListener("focus",u),l.addEventListener("blur",s),()=>{l.removeEventListener("focus",u),l.removeEventListener("blur",s)}},[r,u]),P.useEffect(()=>{u(),t(Pe.checkIfInImage(r))},[r.selection,u,r]),G.jsx(lr,{direction:"row",alignItems:"center",maxWidth:"fit-content",spacing:.5,sx:{visibility:e?"visible":"hidden",zIndex:1,position:"absolute",top:n.top,left:n.left,borderRadius:1,paddingInline:1,paddingBlock:.5,boxShadow:"0px 0px 4px 0px #00000029",color:"text.secondary",backgroundColor:"whiteAccent.main",[`& .${Ya.root}`]:{padding:.5,borderRadius:1}},children:[{format:"bold",icon:Hf},{format:"italic",icon:qf},{format:"underline",icon:Vf},{format:"strikethrough",icon:Kf}].map(({format:s,icon:l})=>{const c=Pe.isMarkActive(r,s);return G.jsx(ka,{Icon:l,active:c,format:s,onMouseDown:f=>{f.preventDefault(),Pe.toggleMark(r,s)}},s)})})}const fc=()=>{const r=Kr();return G.jsx(lr,{direction:"row",spacing:.5,children:[{format:"numbered-list",icon:Ma},{format:"bulleted-list",icon:Ia},{format:"image",icon:Xa}].map(({format:e,icon:t})=>{const n=Pe.isBlockActive(r,e);return G.jsx(ka,{Icon:t,active:n,format:e,onMouseDown:a=>{if(a.preventDefault(),e==="image"){const u=window.prompt("Enter the URL of the image:");if(u&&!Pe.isImageUrl(u)){alert("URL is not an image");return}u&&Pe.insertImage(r,u)}else Pe.toggleBlock(r,e)}},e)})})},cc=()=>{const[r]=P.useState(()=>hc(kf($f(yi())))),e=P.useCallback(n=>G.jsx(vc,{...n}),[]),t=P.useCallback(n=>G.jsx(dc,{...n}),[]);return G.jsx(lr,{spacing:.5,children:G.jsxs(Mf,{editor:r,initialValue:oc,onChange:n=>console.log(n),children:[G.jsx(fc,{}),G.jsx(lc,{}),G.jsx(Ua,{minHeight:200,fontSize:"fontSize",paddingInline:1,children:G.jsx(Of,{spellCheck:!0,autoFocus:!0,placeholder:"",renderElement:e,renderLeaf:t,className:"slate-editor",style:{outline:"none"}})})]})})},vc=r=>{const{attributes:e,children:t,element:n}=r;switch(n.type){case"bulleted-list":return G.jsx("ul",{...e,children:t});case"list-item":return G.jsx("li",{...e,children:t});case"numbered-list":return G.jsx("ol",{...e,children:t});case"image":return G.jsx(gc,{...r});default:return G.jsx(Dc,{...r})}},dc=r=>{const{attributes:e,children:t,leaf:n}=r;return G.jsx("span",{...e,style:{fontWeight:n.bold?"bold":"normal",fontStyle:n.italic?"italic":"normal",textDecoration:`${n.underline?"underline":""} ${n.strikethrough?"line-through":""}`},children:t})},Dc=r=>G.jsx("p",{...r.attributes,children:r.children}),gc=({attributes:r,children:e,element:t})=>{const n=Kr(),a=E.findPath(n,t);return G.jsxs("div",{...r,children:[e,G.jsxs("div",{contentEditable:!1,style:{position:"relative",maxWidth:"fit-content"},children:[G.jsx("img",{src:t.url,style:{display:"block",maxWidth:"100%",maxHeight:"20em"},alt:"image"}),G.jsx(Ga,{size:"small","aria-label":"delete",onClick:()=>b.removeNodes(n,{at:a}),sx:{position:"absolute",top:"0.2em",right:"0.2em",color:"whiteAccent.main"},children:G.jsx(Na,{fontSize:"small"})})]})]})},ka=({active:r,Icon:e,format:t,...n})=>G.jsx(Ja,{sx:{padding:.5,borderRadius:1,color:"text.secondary",background:r?Za.gray[100]:"unset"},title:t,...n,children:G.jsx(e,{fontSize:"small"})}),hc=r=>{const{insertData:e,isVoid:t}=r;return r.isVoid=n=>n.type==="image"?!0:t(n),r.insertData=n=>{const a=n.getData("text/plain"),{files:u}=n;u&&u.length>0||(Pe.isImageUrl(a)?Pe.insertImage(r,a):e(n))},r},mc={name:"title",label:"",type:"text",placeholder:""};function Cc(){const{handleSubmit:r,control:e}=eu({defaultValues:{format:"text",delivery_condition:"all",delivery_settings:"now"}}),t=async()=>{};return G.jsx(ru,{title:Qa.mail_magazine_create.page_title,maxWidth:"unset",children:G.jsxs("form",{onSubmit:r(t),children:[G.jsxs(lr,{spacing:3,children:[G.jsx(Rt,{...mc,variant:"standard",control:e,InputProps:{sx:{paddingInline:3,"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottomWidth:1}}},inputProps:{sx:{fontSize:"h4.fontSize",fontWeight:"fontWeightMediumExtra"}}}),G.jsx(cc,{})]}),G.jsx(lr,{direction:"column",spacing:5,mb:5,children:tu.map(n=>G.jsxs(lr,{spacing:3,children:[G.jsxs(su,{children:[G.jsx(au,{fontWeight:700,fontSize:"h5.fontSize",mb:2.5,title:n.name,children:n.label}),G.jsx(Rt,{...n,variant:"outlined",control:e})]}),G.jsx(uu,{name:n.name,control:e,relatedInputMap:nu})]},n.name))})]})})}const jc=()=>G.jsx(G.Fragment,{children:G.jsxs(G.Fragment,{children:[G.jsx(_a,{}),G.jsx(Cc,{})]})});export{jc as default};
