import{u as E,N as L,d as p,Q as j,a9 as D,a5 as w,a8 as U,j as a,c as B,S as A,B as k,a as O,a2 as q,e as S,h as I,aa as V,ab as R}from"./index-VQSAZRLI.js";import{B as W}from"./BreadcrumbsDynamic-Cdp7sj4a.js";import{F as z}from"./FormContainer-DscY9_xB.js";import{k as T,F as C}from"./forms-iRkAx9I5.js";import{A as y,a as _,L as v}from"./InputWrappers-BNYY81Vx.js";import{u as G,I as M}from"./InputControllers-DDt3EF8g.js";import{N as Q}from"./NumericFormatCustom-Bp_K41t6.js";import{R as $}from"./RequiredBadge-BPkPqPAE.js";import{a as H,b as J,c as K}from"./partnerSlice-Cysv9Fj6.js";import{u as X}from"./useConfirmationGuard-BdDljXp2.js";import{u as Y}from"./useRequestErrorInputResponse-IA9b4GC1.js";import{g as Z}from"./getFormValues-CGQBIzk4.js";import{u as aa}from"./useSuccessMessage-CrTeqooW.js";import{u as ea}from"./useCurrentPages-Itpqw3L7.js";import{n as na,f as ta}from"./inputsJoiSchema-DR80cPXO.js";import"./TextField-D3R9oRAX.js";import"./useThemeProps-DmHRh9Bz.js";import"./index-BYV2JyI0.js";import"./react-number-format.es-DoWa0wzu.js";function sa(e){const{relativePaths:s}=ea(),m=E(),o=L(),{openModal:r}=X(),[i,{isLoading:h}]=H(),[c,{isLoading:x}]=J(),l=aa(),d=Y(),n=p.useMemo(()=>Z(T,e||null),[e]),g=p.useCallback(t=>{e?r(t[C.company_name.name],j.ACCOUNT_PARTNER_UPDATE.operation_name):r(t[C.company_name.name],j.ACCOUNT_PARTNER_ADD.operation_name)},[r,e]),u=p.useCallback((t,b)=>{(async()=>{try{(e?await c({id:e.id,formValues:t}).unwrap():await i(t).unwrap()).id&&(l(e?j.ACCOUNT_PARTNER_UPDATE.successMsg:j.ACCOUNT_PARTNER_ADD.successMsg),m(s.at(-2),{replace:!0}))}catch(f){d(f,b)}finally{o(D(!1))}})()},[i,c,e,o,m,s,l,d]),P=p.useMemo(()=>e?x:h,[h,x,e]);return{initialFormValues:n,handleSubmitForm:g,handleInvite:u,isLoading:P}}function N({userSpecific:e}){const{initialFormValues:s,handleSubmitForm:m,handleInvite:o,isLoading:r}=sa(e),i=w(U),{handleSubmit:h,control:c,reset:x,getValues:l,setError:d}=G({defaultValues:s,resolver:na(ta)});return p.useEffect(()=>{i&&o(l(),d)},[i,o,l,d]),a.jsx(z,{title:(e==null?void 0:e.company_name)||B.partner_invite.page_title,maxWidth:802,children:a.jsx("form",{onSubmit:h(m),children:a.jsxs(A,{alignItems:"center",spacing:3,children:[a.jsx(A,{gap:2,width:"100%",children:T.map(n=>{const{label:g,...u}=n,P=e&&n.name===C.email.name;return u.name!==C.margin_settings.name?a.jsxs(y,{children:[a.jsxs(_,{children:[a.jsx(v,{title:n.name,children:g}),a.jsx($,{isRequired:n.required})]}),a.jsx(M,{...u,variant:"outlined",control:c,disabled:P,inputProps:{className:"disabled-text-placeholder"}})]},n.name):a.jsxs(y,{children:[a.jsx(_,{children:a.jsx(v,{title:n.name,minWidth:135,children:g})}),a.jsx(A,{flex:1,direction:"row",justifyContent:"space-between",children:u.children.map(t=>{const{label:b,unit:F,...f}=t;return a.jsxs(y,{fullWidth:!1,sx:{gap:2,alignItems:"center"},children:[a.jsx(v,{title:t.name,children:b}),a.jsxs(k,{display:"flex",gap:1,alignItems:"center",children:[a.jsx(M,{...f,name:`${n.name}.${t.name}`,variant:"outlined",control:c,InputProps:{sx:{width:96},inputComponent:Q},inputProps:{sx:{textAlign:"right"}}}),a.jsx(O,{component:"span",fontSize:"fontSize",children:F})]})]},t.name)})})]},n.name)})}),a.jsxs(A,{direction:"row",spacing:2.25,alignSelf:"flex-end",children:[a.jsx(q,{onClick:()=>x(),disabled:r,children:"キャンセル"}),a.jsx(S,{loading:r,children:"保存"})]})]})})})}N.propTypes={userSpecific:I.oneOfType([I.object,I.bool])};function ya(){const{id:e}=V(),{data:s,isLoading:m,isSuccess:o,isError:r,error:i}=K({id:e},{skip:!e});return m?a.jsx(R,{children:"Loading..."}):!o&&r?a.jsx(R,{children:i.data.detail||"Not found."}):a.jsxs(a.Fragment,{children:[a.jsx(W,{userSpecific:(s==null?void 0:s.company_name)||""}),a.jsx(N,{userSpecific:e?s:!1})]})}export{ya as default};
