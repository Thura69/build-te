import{u as E,N as P,d,Q as h,a9 as _,a5 as T,a8 as y,j as e,c as L,S as x,a2 as R,e as N,h as M,aa as D,ab as j}from"./index-VQSAZRLI.js";import{B as U}from"./BreadcrumbsDynamic-Cdp7sj4a.js";import{F as S}from"./FormContainer-DscY9_xB.js";import{e as I,F as B}from"./forms-iRkAx9I5.js";import{A as k,a as w,L as O}from"./InputWrappers-BNYY81Vx.js";import{u as V,I as q}from"./InputControllers-DDt3EF8g.js";import{n as G,b as Q}from"./inputsJoiSchema-DR80cPXO.js";import{P as W}from"./PostalCodeInputController-CQrCWMfS.js";import{b as z,c as H,d as J}from"./memberSlice-DyXyzB7a.js";import{u as K}from"./useConfirmationGuard-BdDljXp2.js";import{u as X}from"./useRequestErrorInputResponse-IA9b4GC1.js";import{g as Y}from"./getFormValues-CGQBIzk4.js";import{u as Z}from"./useSuccessMessage-CrTeqooW.js";import{u as $}from"./useCurrentPages-Itpqw3L7.js";import"./TextField-D3R9oRAX.js";import"./useThemeProps-DmHRh9Bz.js";import"./index-BYV2JyI0.js";import"./PatternFormatCustom-DnZ87fRv.js";import"./react-number-format.es-DoWa0wzu.js";function ee(t){const{relativePaths:s}=$(),r=E(),o=P(),{openModal:a}=K(),[n,{isLoading:p}]=z(),[l,{isLoading:i}]=H(),u=Z(),m=X(),b=d.useMemo(()=>Y(I,t||null),[t]),c=d.useCallback(()=>{t?a("",h.ACCOUNT_MEMBER_UPDATE.operation_name):a("",h.ACCOUNT_MEMBER_ADD.operation_name)},[a,t]),g=d.useCallback((C,F)=>{(async()=>{try{(t?await l({id:t.id,formValues:C}).unwrap():await n(C).unwrap()).name&&(u(t?h.ACCOUNT_PARTNER_UPDATE.successMsg:h.ACCOUNT_PARTNER_ADD.successMsg),r(s.at(-2),{replace:!0}))}catch(A){m(A,F)}finally{o(_(!1))}})()},[n,l,t,o,r,s,u,m]),f=d.useMemo(()=>t?i:p,[p,i,t]);return{initialFormValues:b,handleSubmitForm:c,handleInvite:g,isLoading:f}}function v({userSpecific:t}){const{initialFormValues:s,handleSubmitForm:r,handleInvite:o,isLoading:a}=ee(t),n=T(y),{handleSubmit:p,control:l,getValues:i,setValue:u,setError:m,reset:b}=V({defaultValues:s,resolver:G(Q)});return d.useEffect(()=>{n&&o(i(),m)},[n,o,i,m]),e.jsx(S,{title:L.member_invite.page_title,maxWidth:802,children:e.jsx("form",{onSubmit:p(r),children:e.jsxs(x,{alignItems:"center",spacing:3,children:[e.jsx(x,{gap:2,width:"100%",children:I.map(c=>{const{label:g,...f}=c;return e.jsxs(k,{sx:{gap:0},children:[e.jsx(w,{children:e.jsx(O,{title:c.name,children:g})}),c.name!==B.postal_code.name?e.jsx(q,{...f,variant:"outlined",control:l,inputProps:{className:"disabled-text-placeholder"}}):e.jsx(W,{restProps:f,control:l,getValues:i,setValue:u,setError:m})]},c.name)})}),e.jsxs(x,{direction:"row",spacing:2.25,alignSelf:"flex-end",children:[e.jsx(R,{onClick:()=>b(),disabled:a,children:"キャンセル"}),e.jsx(N,{loading:a,children:"保存"})]})]})})})}v.propTypes={userSpecific:M.oneOfType([M.object,M.bool])};function Ae(){const{id:t}=D(),{data:s,isLoading:r,isSuccess:o,isError:a,error:n}=J({id:t},{skip:!t});return r?e.jsx(j,{children:"Loading..."}):!o&&a?e.jsx(j,{children:n.data.detail||"Not found."}):e.jsxs(e.Fragment,{children:[e.jsx(U,{userSpecific:(s==null?void 0:s.email)||""}),e.jsx(v,{userSpecific:t?s:!1})]})}export{Ae as default};
