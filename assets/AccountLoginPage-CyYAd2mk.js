import{j as p,P as B,u as M,S as A,C as q,b as H,B as I,a as T,d as U,e as F,f as G,H as P}from"./index-VQSAZRLI.js";import{L as N}from"./LoginForm-BsQRZ6eZ.js";import{l as J}from"./forms-iRkAx9I5.js";import{l as $}from"./inputsJoiSchema-DR80cPXO.js";import{C as D,a as R}from"./CardContent-DTrM2CnM.js";import"./styledAccountsComponents-CnjzePuJ.js";import"./InputControllers-DDt3EF8g.js";import"./TextField-D3R9oRAX.js";import"./useThemeProps-DmHRh9Bz.js";import"./index-BYV2JyI0.js";import"./getFormValues-CGQBIzk4.js";import"./BpCheckbox-DAGCBt5E.js";import"./useRequestErrorInputResponse-IA9b4GC1.js";const z="https://accounts.google.com/o/oauth2/v2/auth",K=()=>Math.random().toString(36).substring(2)+Date.now().toString(36);function Q(){const d=()=>{const i=encodeURIComponent("http://127.0.0.1:8000/api/users/accounts/google/login/callback/"),c="1078704162303-adfddlo3nq32t81semml6dndj6vq8qbe.apps.googleusercontent.com",a="email profile",l="code",f=K(),g=`${z}?client_id=${c}&redirect_uri=${i}&scope=${a}&response_type=${l}&state=${f}`;window.location.href=g};return p.jsx(B,{variant:"outlined",onClick:d,sx:{fontWeight:"fontWeightBold"},children:"Googleアカウントで登録"})}function V(){const d=M(),i=()=>d("/accounts/registration");return p.jsxs(A,{height:"100%",justifyContent:"center",children:[p.jsx(q,{children:p.jsx(H,{variant:"contained",sx:{fontWeight:"fontWeightBold"},onClick:i,children:"新規会員登録"})}),p.jsxs(I,{display:"flex",flexDirection:"column",mt:3,gap:3,children:[p.jsx(T,{component:"span",variant:"body2",textAlign:"center",children:"または"}),p.jsx(Q,{})]})]})}var O=function(d,i){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(c[l]=a[l])},O(d,i)};function X(d,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");O(d,i);function c(){this.constructor=d}d.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}var L=function(){return L=Object.assign||function(i){for(var c,a=1,l=arguments.length;a<l;a++){c=arguments[a];for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(i[f]=c[f])}return i},L.apply(this,arguments)};var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function W(d,i){return d(i={exports:{}},i.exports),i.exports}var b=W(function(d,i){Object.defineProperty(i,"__esModule",{value:!0});var c=function(){function a(){var l=this;this.locked=new Map,this.addToLocked=function(f,g){var k=l.locked.get(f);k===void 0?g===void 0?l.locked.set(f,[]):l.locked.set(f,[g]):g!==void 0&&(k.unshift(g),l.locked.set(f,k))},this.isLocked=function(f){return l.locked.has(f)},this.lock=function(f){return new Promise(function(g,k){l.isLocked(f)?l.addToLocked(f,g):(l.addToLocked(f),g())})},this.unlock=function(f){var g=l.locked.get(f);if(g!==void 0&&g.length!==0){var k=g.pop();l.locked.set(f,g),k!==void 0&&setTimeout(k,0)}else l.locked.delete(f)}}return a.getInstance=function(){return a.instance===void 0&&(a.instance=new a),a.instance},a}();i.default=function(){return c.getInstance()}});E(b);var Y=E(W(function(d,i){var c=_&&_.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,h){function u(w){try{x(s.next(w))}catch(o){h(o)}}function m(w){try{x(s.throw(w))}catch(o){h(o)}}function x(w){w.done?n(w.value):new r(function(o){o(w.value)}).then(u,m)}x((s=s.apply(e,t||[])).next())})},a=_&&_.__generator||function(e,t){var r,s,n,h,u={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(x){return function(w){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,s=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(n=u.trys,!((n=n.length>0&&n[n.length-1])||o[0]!==6&&o[0]!==2)){u=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){u.label=o[1];break}if(o[0]===6&&u.label<n[1]){u.label=n[1],n=o;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(o);break}n[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(C){o=[6,C],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([x,w])}}},l=_;Object.defineProperty(i,"__esModule",{value:!0});var f="browser-tabs-lock-key",g={key:function(e){return c(l,void 0,void 0,function(){return a(this,function(t){throw new Error("Unsupported")})})},getItem:function(e){return c(l,void 0,void 0,function(){return a(this,function(t){throw new Error("Unsupported")})})},clear:function(){return c(l,void 0,void 0,function(){return a(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return c(l,void 0,void 0,function(){return a(this,function(t){throw new Error("Unsupported")})})},setItem:function(e,t){return c(l,void 0,void 0,function(){return a(this,function(r){throw new Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function k(e){return new Promise(function(t){return setTimeout(t,e)})}function v(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",s=0;s<e;s++)r+=t[Math.floor(Math.random()*t.length)];return r}var y=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+v(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,e.waiters===void 0&&(e.waiters=[])}return e.prototype.acquireLock=function(t,r){return r===void 0&&(r=5e3),c(this,void 0,void 0,function(){var s,n,h,u,m,x,w;return a(this,function(o){switch(o.label){case 0:s=Date.now()+v(4),n=Date.now()+r,h=f+"-"+t,u=this.storageHandler===void 0?g:this.storageHandler,o.label=1;case 1:return Date.now()<n?[4,k(30)]:[3,8];case 2:return o.sent(),u.getItemSync(h)!==null?[3,5]:(m=this.id+"-"+t+"-"+s,[4,k(Math.floor(25*Math.random()))]);case 3:return o.sent(),u.setItemSync(h,JSON.stringify({id:this.id,iat:s,timeoutKey:m,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,k(30)];case 4:return o.sent(),(x=u.getItemSync(h))!==null&&(w=JSON.parse(x)).id===this.id&&w.iat===s?(this.acquiredIatSet.add(s),this.refreshLockWhileAcquired(h,s),[2,!0]):[3,7];case 5:return e.lockCorrector(this.storageHandler===void 0?g:this.storageHandler),[4,this.waitForSomethingToChange(n)];case 6:o.sent(),o.label=7;case 7:return s=Date.now()+v(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(t,r){return c(this,void 0,void 0,function(){var s=this;return a(this,function(n){return setTimeout(function(){return c(s,void 0,void 0,function(){var h,u,m;return a(this,function(x){switch(x.label){case 0:return[4,b.default().lock(r)];case 1:return x.sent(),this.acquiredIatSet.has(r)?(h=this.storageHandler===void 0?g:this.storageHandler,(u=h.getItemSync(t))===null?(b.default().unlock(r),[2]):((m=JSON.parse(u)).timeRefreshed=Date.now(),h.setItemSync(t,JSON.stringify(m)),b.default().unlock(r),this.refreshLockWhileAcquired(t,r),[2])):(b.default().unlock(r),[2])}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return c(this,void 0,void 0,function(){return a(this,function(r){switch(r.label){case 0:return[4,new Promise(function(s){var n=!1,h=Date.now(),u=!1;function m(){if(u||(window.removeEventListener("storage",m),e.removeFromWaiting(m),clearTimeout(x),u=!0),!n){n=!0;var w=50-(Date.now()-h);w>0?setTimeout(s,w):s(null)}}window.addEventListener("storage",m),e.addToWaiting(m);var x=setTimeout(m,Math.max(0,t-Date.now()))})];case 1:return r.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),e.waiters!==void 0&&e.waiters.push(t)},e.removeFromWaiting=function(t){e.waiters!==void 0&&(e.waiters=e.waiters.filter(function(r){return r!==t}))},e.notifyWaiters=function(){e.waiters!==void 0&&e.waiters.slice().forEach(function(t){return t()})},e.prototype.releaseLock=function(t){return c(this,void 0,void 0,function(){return a(this,function(r){switch(r.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,r.sent()]}})})},e.prototype.releaseLock__private__=function(t){return c(this,void 0,void 0,function(){var r,s,n,h;return a(this,function(u){switch(u.label){case 0:return r=this.storageHandler===void 0?g:this.storageHandler,s=f+"-"+t,(n=r.getItemSync(s))===null?[2]:(h=JSON.parse(n)).id!==this.id?[3,2]:[4,b.default().lock(h.iat)];case 1:u.sent(),this.acquiredIatSet.delete(h.iat),r.removeItemSync(s),b.default().unlock(h.iat),e.notifyWaiters(),u.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var r=Date.now()-5e3,s=t,n=[],h=0;;){var u=s.keySync(h);if(u===null)break;n.push(u),h++}for(var m=!1,x=0;x<n.length;x++){var w=n[x];if(w.includes(f)){var o=s.getItemSync(w);if(o!==null){var C=JSON.parse(o);(C.timeRefreshed===void 0&&C.timeAcquired<r||C.timeRefreshed!==void 0&&C.timeRefreshed<r)&&(s.removeItemSync(w),m=!0)}}}m&&e.notifyWaiters()},e.waiters=void 0,e}();i.default=y})),j=W(function(d,i){var c=_&&_.__assign||function(){return c=Object.assign||function(v){for(var y,e=1,t=arguments.length;e<t;e++)for(var r in y=arguments[e])Object.prototype.hasOwnProperty.call(y,r)&&(v[r]=y[r]);return v},c.apply(this,arguments)};function a(v,y){if(!y)return"";var e="; "+v;return y===!0?e:e+"="+y}function l(v,y,e){return encodeURIComponent(v).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(y).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if(typeof t.expires=="number"){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*t.expires),t.expires=r}return a("Expires",t.expires?t.expires.toUTCString():"")+a("Domain",t.domain)+a("Path",t.path)+a("Secure",t.secure)+a("SameSite",t.sameSite)}(e)}function f(v){for(var y={},e=v?v.split("; "):[],t=/(%[\dA-F]{2})+/gi,r=0;r<e.length;r++){var s=e[r].split("="),n=s.slice(1).join("=");n.charAt(0)==='"'&&(n=n.slice(1,-1));try{y[s[0].replace(t,decodeURIComponent)]=n.replace(t,decodeURIComponent)}catch{}}return y}function g(){return f(document.cookie)}function k(v,y,e){document.cookie=l(v,y,c({path:"/"},e))}i.__esModule=!0,i.encode=l,i.parse=f,i.getAll=g,i.get=function(v){return g()[v]},i.set=k,i.remove=function(v,y){k(v,"",c(c({},y),{expires:-1}))}});E(j),j.encode,j.parse,j.getAll;j.get;j.set;j.remove;new Y;var Z={isAuthenticated:!1,isLoading:!0},S=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},ee=L(L({},Z),{buildAuthorizeUrl:S,buildLogoutUrl:S,getAccessTokenSilently:S,getAccessTokenWithPopup:S,getIdTokenClaims:S,loginWithRedirect:S,loginWithPopup:S,logout:S,handleRedirectCallback:S}),te=U.createContext(ee);(function(d){X(i,d);function i(c,a){var l=d.call(this,a||c)||this;return l.error=c,l.error_description=a,Object.setPrototypeOf(l,i.prototype),l}return i})(Error);var ne=function(d){return d===void 0&&(d=te),U.useContext(d)};function re(){const{loginWithRedirect:d}=ne(),i=async()=>{d({authorizationParams:{connection:"google-oauth2"}})};return p.jsx(F,{variant:"outlined",loading:!1,sx:{fontWeight:"fontWeightBold"},type:"button",onClick:i,children:"Googleアカウントでログイン"})}function ve(){const[d,{isLoading:i}]=G();return p.jsxs(A,{direction:"row",spacing:6,minWidth:"976px",children:[p.jsx(I,{flex:"1",children:p.jsx(D,{elevation:26,children:p.jsxs(R,{size:"large",children:[p.jsx(P,{textAlign:"center",mb:3,children:"ログイン"}),p.jsx(N,{form:J,formSchema:$,query:d,isLoading:i}),p.jsxs(I,{display:"flex",flexDirection:"column",mt:2,gap:3,children:[p.jsx(T,{component:"span",variant:"body2",textAlign:"center",children:"または"}),p.jsx(re,{})]})]})})}),p.jsx(I,{flex:"1",children:p.jsx(D,{elevation:26,sx:{height:"100%"},children:p.jsx(R,{size:"large",sx:{height:"100%"},children:p.jsxs(q,{height:"100%",children:[p.jsxs(A,{alignItems:"center",spacing:2,children:[p.jsx(P,{children:"新規登録"}),p.jsx(T,{component:"span",variant:"h5",children:"初めてご利用の方はこちら"})]}),p.jsx(V,{})]})})})})]})}export{ve as default};
