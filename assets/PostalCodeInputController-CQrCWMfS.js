import{ac as y,d as m,j as u,S as j,e as I,h as r}from"./index-VQSAZRLI.js";import{a as q,I as v}from"./InputControllers-DDt3EF8g.js";import{u as g}from"./useRequestErrorInputResponse-IA9b4GC1.js";import{F as s}from"./forms-iRkAx9I5.js";import{P as E}from"./PatternFormatCustom-DnZ87fRv.js";function S({control:l,restProps:c,getValues:a,setValue:i,setError:f}){const[h,{isLoading:C}]=y(),P=g(),{fieldState:{invalid:x,isDirty:p},field:o}=q({control:l,name:c.name,defaultValue:""}),n=m.useCallback(()=>{[s.prefectures.name,s.municipalities.name].map(e=>i(e,"",{shouldDirty:!0}))},[i]),R=async()=>{if(!(x||!o.value))try{const e=await h(o.value),t=e.data;if(t&&Object.keys(t).map(d=>i(d,t[d],{shouldValidate:!0,shouldDirty:!0})),e.error)throw e.error}catch(e){n(),P(e,f)}};return m.useEffect(()=>{const e=a(s.prefectures.name),t=a(s.municipalities.name);(e||t)&&(p||!o.value)&&n()},[o.value,a,n,p]),u.jsxs(j,{flex:1,direction:"row",alignItems:"start",spacing:2,children:[u.jsx(v,{...c,variant:"outlined",control:l,sx:{flex:1},InputProps:{inputComponent:E,inputProps:{format:"###-####"}}}),u.jsx(I,{loading:C,sx:{fontWeight:"fontWeightBold",paddingInline:3},variant:"outlined",type:"button",onClick:R,children:"住所検索"})]})}S.propTypes={control:r.object.isRequired,restProps:r.object.isRequired,getValues:r.func.isRequired,setValue:r.func.isRequired,setError:r.func.isRequired};export{S as P};
